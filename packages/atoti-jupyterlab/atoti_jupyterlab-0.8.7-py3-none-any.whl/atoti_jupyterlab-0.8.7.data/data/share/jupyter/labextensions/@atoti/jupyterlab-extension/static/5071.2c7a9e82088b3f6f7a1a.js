/*! For license information please see 5071.2c7a9e82088b3f6f7a1a.js.LICENSE.txt */
"use strict";(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[5071,3388,4881,7076,7458,3803],{43803:(e,r,t)=>{t.r(r),t.d(r,{canOpenDrillthroughOnSelection:()=>b,getDrillthroughWidgetFilters:()=>S,pluginMenuItemOpenDrillthrough:()=>N});var n=t(93388),o=t(77026),l=t(66029),a=t(93481),i=t(84138),s=t(34420),u=t(51588),c=t(51786),m=t(85672),d=t(95326),h=t(65942),f=t(71265),g=t(2445),p=t(49678),y=t(99856);function b(e){return void 0!==e&&!(e.axes&&e.axes.length>0)&&void 0!==e.cells&&1===e.cells.length&&void 0!==e.cells[0].value}var _=t(37801),v=t(10665),C=t(33419);function x(e,r){const{dimensionName:t,hierarchyName:n}=e;return r.some((e=>(0,C.I)(e,{dimensionName:t,hierarchyName:n})))}function S({sourceWidgetFilters:e,tuple:r,cube:t}){return[...(e||[]).filter((e=>!x(e,r))),...r.map((({dimensionName:e,hierarchyName:r,namePath:t})=>({type:"members",dimensionName:e,hierarchyName:r,members:[t]})))]}const N={key:"open-drillthrough",useMenuItem:e=>{const{selection:r,widgetState:t}=e,{cube:C,serverKey:N}=(0,y.useCube)(t),{formatMessage:O}=(0,a.useIntl)(),D=(0,m.T)(),k=(0,l.useMemo)((()=>{if(b(r))return r.cells[0].tuple.filter((e=>"Measures"===e.dimensionName||!(0,s.isTotal)((0,f._)(e,C),e)))}),[C,r]),F=(0,l.useMemo)((()=>{if(k){const e=k.filter((e=>"Measures"!==e.dimensionName));return O({id:"aui.plugins.menu-item.open-drillthrough.openDrillthrough"},{member:e.length>0?(0,s.getTupleCaption)(e,{captionForTotals:O({id:"aui.total"}),cube:C,separator:", ",hasOnlyCaptionForLeafLevels:!0}):void 0})}}),[O,k,C]),[j]=(0,u.y)("drillthrough.defaultSelectedColumns"),[M]=(0,c.o)(N,C.name),W=(0,l.useMemo)((()=>{const e=(0,p.K)(M??[]);return(0,o.flatten)(["numeric","regular","date"].map((r=>e[r]??[])))}),[M]),E=(0,l.useCallback)((async()=>{if(D&&F&&k&&(0,i.F)(e)){const r=(0,d.A)(e.dashboardState.pagesOrder),n=e.dashboardState.pagesOrder.indexOf(D),l=e.dashboardState.pages[D];if(void 0===t.query.mdx)return;const a=function({name:e,sourceWidget:r,sourceWidgetPage:t,tuple:n,drillthroughColumns:l,defaultSelectedColumns:a,cube:i}){const s=S({sourceWidgetFilters:r.filters,tuple:n,cube:i}),u=(0,o.map)(l,"name"),c=a[i.name]?(0,o.intersection)(u,a[i.name]):u,m={mdx:(0,_.r)((0,y.getDefaultMdxDrillthrough)(i.name),{drillthroughColumnUniqueNames:c})},d=(t.filters||[]).filter((e=>!x(e,n)));return{name:e,content:{0:{...v.o.initialState,query:m,serverKey:r.serverKey,initialCubeName:i.name,filters:s}},layout:{direction:"column",children:[{leafKey:"0",size:1}]},filters:d}}({name:F,sourceWidget:t,sourceWidgetPage:l,tuple:k,drillthroughColumns:W,defaultSelectedColumns:j,cube:C}),i=(0,h.W)(e.dashboardState,{page:a,key:r,index:n+1});e.onDashboardChange(i),e.onActivePageChange(r)}}),[D,C,F,e,k,t,j,W]);if((0,i.F)(e)&&k&&t.query.mdx)return{icon:(0,n.tZ)(g.IconDrillthrough,{}),label:F,onClick:E}},translations:{"en-US":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {on {member}}\n          }"},"fr-FR":{openDrillthrough:"Drillthrough {member, select,\n           undefined {}\n           other {sur {member}}\n          }"}}}},93388:(e,r,t)=>{t.d(r,{BX:()=>i,HY:()=>l,tZ:()=>a});var n=t(97458),o=t(38530),l=(t(66029),t(21759),t(10063),t(93232),t(78070),n.Fragment);function a(e,r,t){return o.h.call(r,"css")?n.jsx(o.E,(0,o.c)(e,r),t):n.jsx(e,r,t)}function i(e,r,t){return o.h.call(r,"css")?n.jsxs(o.E,(0,o.c)(e,r),t):n.jsxs(e,r,t)}},56053:(e,r,t)=>{var n=t(66029),o=Symbol.for("react.element"),l=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function u(e,r,t){var n,l={},u=null,c=null;for(n in void 0!==t&&(u=""+t),void 0!==r.key&&(u=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,n)&&!s.hasOwnProperty(n)&&(l[n]=r[n]);if(e&&e.defaultProps)for(n in r=e.defaultProps)void 0===l[n]&&(l[n]=r[n]);return{$$typeof:o,type:e,key:u,ref:c,props:l,_owner:i.current}}r.Fragment=l,r.jsx=u,r.jsxs=u},97458:(e,r,t)=>{e.exports=t(56053)}}]);