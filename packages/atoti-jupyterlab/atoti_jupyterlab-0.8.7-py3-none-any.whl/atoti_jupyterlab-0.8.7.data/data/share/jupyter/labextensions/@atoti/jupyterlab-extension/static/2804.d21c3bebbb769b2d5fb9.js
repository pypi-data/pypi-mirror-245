(self.webpackChunk_atoti_jupyterlab_extension=self.webpackChunk_atoti_jupyterlab_extension||[]).push([[2804],{52804:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>v});var n=a(93388),r=a(66029),i=a(31236),o=a.n(i),s=a(34420),d=a(93774),l=a(37963),g=a(63406),u=a(57947),h=a(23893),f=a(64551),y=a(77026),c=a(99856),w=a(4839);const p=(0,y.debounce)((({visibleRange:e,chunkSizes:t,data:a,widgetName:n,onQueryRangesChanged:r})=>{if(!t)return;const i={};let o=!1;Object.entries(t).forEach((([r,d])=>{if(void 0===d)throw new Error(`Undefined chunkSize for the axis "${r}" in the lazy loading configuration of "${n}". This is not supported.\nEncountered widgetPlugin.lazyLoading.chunkSizes = ${JSON.stringify(t,void 0,2)}`);const l=s.axisIds[r],g=a.axes.find((e=>e.id===l)),u=g?.range,h=e[r].from,f=e[r].to;if(!u||u.entireAxis)i[l]={from:0,to:d-1};else if(h>=u.from&&f<=u.to)i[l]={from:u.from,to:u.to};else{const e=h+Math.floor((f-h)/2),t=Math.max(0,Math.min(u.axisLength-d,e-Math.ceil(d/2))),a=Math.min(t+d,u.axisLength);i[l]={from:t,to:a},o=o||t!==u.from||a!==u.to}})),o&&r(i)}),300),b=e=>{const{data:t,widgetState:a,onQueryRangesChanged:i}=e,o=a.switchedTo??a.widgetKey,[s]=(0,h.useWidgetPlugins)([o]),d=s?.lazyLoading?.chunkSizes,l=(0,c.useWidgetName)(a),g=(0,r.useCallback)((e=>p({visibleRange:e,chunkSizes:d,data:t,widgetName:l,onQueryRangesChanged:i})),[d,t,l,i]);return(0,n.tZ)(w.e,{...e,onVisibleRangeChanged:g})};var m=a(15169),C=a(27411);const S=e=>e,v=(0,r.memo)((e=>{(0,m.useCallOnLoadedAfterFirstProperRender)(e);const{queryResult:t,onSelectionChange:a,widgetState:i}=e,{widgetKey:o}=e.widgetState,[d]=(0,h.useWidgetPlugins)([o]),y=(0,c.useWidgetName)(i);(0,r.useMemo)((()=>{(0,l.w)(y,i.style?.measures)}),[i.style?.measures,y]);const[w]=(0,g.J6)([d?.cell]),[p]=(0,u.Nw)([d?.cellStyle]),v=(0,r.useCallback)((p?.withCellStyle??S)(w?.Cell??f.V),[w,p]);if(v.displayName="WithCellStyle",(0,c.isMappingEmpty)(i.mapping))return(0,n.tZ)(C.n,{size:e.widgetState.style?.size,style:e.style,reason:"noQuery"});if(!t.isLoading&&t.error){if((0,s.isQueryErrorOfType)(t.error,"QueryTimeoutException"))throw new s.QueryTimeoutError(t.error);throw new s.MdxError(t.error)}return(0,n.tZ)(c.WidgetLoadingOverlay,{isLoading:t.isLoading,children:t.data&&t.data.cells.length>0?(0,n.tZ)(b,{areRepeatedTotalsHidden:!1!==e.areRepeatedTotalsHidden,Cell:v,containerStyle:e.style,data:t.data,isRowHeaderTree:e.isRowHeaderTree,onChange:e.onChange,onSelectionChange:a,widgetState:e.widgetState,onQueryRangesChanged:e.onQueryRangesChanged}):(0,n.tZ)(C.n,{size:e.widgetState.style?.size,style:e.style,reason:0===t.data?.cells.length?"noData":"noQuery"})})}),((e,t)=>{if((0,c.isWidgetInDashboard)(t)!==(0,c.isWidgetInDashboard)(e))return!1;if((0,c.isWidgetInDashboard)(t)&&(0,c.isWidgetInDashboard)(e)){const{dashboardState:a,onDashboardChange:n,...r}=e,{dashboardState:i,onDashboardChange:s,...l}=t;return o()(r,l)&&a.filters===i.filters&&(0,d.f)(a,e.pageKey)?.filters===(0,d.f)(i,t.pageKey)?.filters}return o()(e,t)}))},31236:e=>{e.exports=function(e,t,a,n){var r=a?a.call(n,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(t),d=0;d<i.length;d++){var l=i[d];if(!s(l))return!1;var g=e[l],u=t[l];if(!1===(r=a?a.call(n,g,u,l):void 0)||void 0===r&&g!==u)return!1}return!0}}}]);