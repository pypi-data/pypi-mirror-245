"use strict";(self.webpackChunkpy_ssv=self.webpackChunkpy_ssv||[]).push([[427],{657:(e,t,n)=>{n.d(t,{Y:()=>i,o:()=>o});const s=n(147),i=s.version,o=s.name},427:(e,t,n)=>{n.r(t),n.d(t,{SSVRenderModel:()=>l,SSVRenderView:()=>r});var s,i=n(829),o=n(657);n(757),function(e){e.PNG="png",e.JPG="jpg",e.H264="h264"}(s||(s={}));class l extends i.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:l.model_name,_model_module:l.model_module,_model_module_version:l.model_module_version,_view_name:l.view_name,_view_module:l.view_module,_view_module_version:l.view_module_version,streaming_mode:s.PNG,stream_data:"ts",status_connection:!1,status_logs:"",mouse_pos_x:0,mouse_pos_y:0,enable_renderdoc:!1}}}l.serializers={...i.DOMWidgetModel.serializers},l.model_name="SSVRenderModel",l.model_module=o.o,l.model_module_version=o.Y,l.view_name="SSVRenderView",l.view_module=o.o,l.view_module_version=o.Y;class r extends i.DOMWidgetView{constructor(){super(...arguments),this._stream_img_element=null,this._status_frame_stats_element=null,this._status_resolution_element=null,this._log_button_element=null,this._log_element=null}initialize(e){super.initialize(e)}render(){switch(this.el.classList.add("ssv-render-widget"),this.model.get("streaming_mode")){case s.JPG:case s.PNG:this._stream_img_element=document.createElement("img"),this._stream_img_element.className="ssv-render-viewport",this._stream_img_element.setAttribute("draggable","false"),this.el.appendChild(this._stream_img_element);break;default:console.error(`Unsupported streaming mode '${this.model.get("streaming_mode")}'!`)}this.create_status_bar(),this.stream_data_changed(),this.model.on("change:stream_data",this.stream_data_changed,this),this._stream_img_element&&(setInterval((()=>{this.send({heartbeat:0}),this.slow_update()}),250),this._stream_img_element.addEventListener("mousemove",(e=>{if(null==(null==e?void 0:e.target)||!(e.target instanceof HTMLElement))return;const t=e.target.getBoundingClientRect();this.model.set("mouse_pos_x",Math.round(e.clientX-t.left)),this.model.set("mouse_pos_y",Math.round(t.height-(e.clientY-t.top))),this.model.save_changes()})),this._stream_img_element.addEventListener("mousedown",(e=>{this.send({mousedown:0})})),this._stream_img_element.addEventListener("mouseup",(e=>{this.send({mouseup:0})})),this._stream_img_element.addEventListener("keydown",(e=>{this.send({keydown:e.key})})),this._stream_img_element.addEventListener("keyup",(e=>{this.send({keyup:e.key})})))}slow_update(){var e,t,n,s;this._status_frame_stats_element&&(this._status_frame_stats_element.innerText="? FPS"),this._status_resolution_element&&(this._status_resolution_element.innerText=`${null!==(t=null===(e=this._stream_img_element)||void 0===e?void 0:e.width)&&void 0!==t?t:0} x ${null!==(s=null===(n=this._stream_img_element)||void 0===n?void 0:n.height)&&void 0!==s?s:0}`)}create_status_bar(){const e=document.createElement("div");e.className="ssv-status-bar",this.el.appendChild(e);const t=document.createElement("span");t.className="ssv-status-play-pause",e.appendChild(t);const n=document.createElement("button");n.textContent="‚èµ",n.className="ssv-button ssv-icon-button",n.onclick=()=>{this.send({play:0})},t.appendChild(n);const s=document.createElement("button");s.textContent="‚èπÔ∏é",s.className="ssv-button ssv-icon-button",s.onclick=()=>{this.send({stop:0})},t.appendChild(s);const i=document.createElement("span");i.className="ssv-status-frame-stats",e.appendChild(i),this._status_frame_stats_element=i;const o=document.createElement("span");o.className="ssv-status-resolution",e.appendChild(o),this._status_resolution_element=o;const l=document.createElement("span");l.className="ssv-status-connection",e.appendChild(l),this.model.on("change:status_connection",(()=>{this.model.get("status_connection")?(l.innerText="üó≤ Connected",l.classList.toggle("ssv-status-disconnected",!1)):(l.innerText="‚úï Disconnected",l.classList.toggle("ssv-status-disconnected",!0))}),this);const r=document.createElement("span");r.className="ssv-status-renderdoc",e.appendChild(r);const a=document.createElement("button");a.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 988.2758 628.5897"><path class="ssv-icon" d="m491.8899,109.7808c80.9677,0,146.6103,65.6427,146.6103,146.6103s-65.6427,146.6295-146.6103,146.6295-146.6103-65.6427-146.6103-146.6295,65.6427-146.6103,146.6103-146.6103m184.8365,324.1957c44.2912-46.0705,71.5546-108.6137,71.5546-177.5854C748.281,114.7934,633.4875,0,491.8899,0S235.4987,114.7934,235.4987,256.3911c0,69.4118,26.0773,130.788,70.8849,176.9541C171.8649,467.4771,63.0599,538.9934,0,628.5897c134.4423-66.4845,306.5368-106.4135,494.1475-106.4135s359.7052,39.929,494.1284,106.4135c-63.6147-90.3998-175.3852-160.8256-311.5494-194.6132"/></svg>\n',a.className="ssv-button ssv-icon-button",r.appendChild(a),a.style.visibility=this.model.get("enable_renderdoc")?"visible":"hidden",a.onclick=()=>{this.send({renderdoc_capture:0})},this.model.on("change:enable_renderdoc",(()=>{a.style.visibility=this.model.get("enable_renderdoc")?"visible":"hidden"}));const c=document.createElement("span");c.className="ssv-status-log",e.appendChild(c);const d=document.createElement("button");this._log_button_element=d,d.textContent="View Log",d.className="ssv-button",c.appendChild(d),d.onclick=()=>{if(this._log_element){const e=this._log_element.classList.toggle("ssv-log-active");d.textContent=e?"Hide Log":"View Log"}};const p=document.createElement("code");p.className="ssv-log",this.el.appendChild(p),this._log_element=p,this.model.on("change:status_logs",(()=>{if(this._log_element){let e=this.model.get("status_logs");e=e.replace(/\r\n|\r|\n/g,"<br>"),e=e.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),e.includes("[WARNING]")?(e="<span class='ssv-log-warn'>"+e+"</span>",this._log_button_element&&(this._log_button_element.textContent+=" ‚ö†Ô∏è")):e.includes("[ERROR]")&&(e="<span class='ssv-log-error'>"+e+"</span>",this._log_button_element&&(this._log_button_element.textContent+=" ‚õî"));const t=this._log_element.scrollHeight==this._log_element.clientHeight||this._log_element.scrollHeight-this._log_element.scrollTop-this._log_element.clientHeight<=150;this._log_element.innerHTML=this._log_element.innerHTML+e,t&&this._log_element.scrollTo({top:this._log_element.scrollHeight,behavior:"instant"})}}),this)}stream_data_changed(){this._stream_img_element&&(this._stream_img_element.src=this.model.get("stream_data"))}}},487:(e,t,n)=>{n.d(t,{Z:()=>r});var s=n(12),i=n.n(s),o=n(905),l=n.n(o)()(i());l.push([e.id,'/*\n * Copyright (c) 2023 Thomas Mathieson.\n * Distributed under the terms of the MIT license.\n */\n\n.ssv-render-widget {\n  background-color: var(--jp-layout-color1); /* #101515;*/\n  padding: 2px;\n}\n\n.ssv-render-viewport {\n\n}\n\n.ssv-status-bar {\n  padding: 4px;\n  background-color: var(--jp-layout-color2); /* #203030;*/\n  color: var(--jp-ui-font-color1);\n  display: flex;\n  align-items: center;\n}\n\n.ssv-icon-button {\n  aspect-ratio: 1;\n  font-size: 1rem;\n}\n\n.ssv-icon {\n  fill: var(--jp-ui-font-color1);\n  stroke-width: 0;\n}\n\n[class^="ssv-status-"] {\n  padding: 2px 20px 2px 2px;\n}\n\n.ssv-status-disconnected {\n  color: var(--jp-error-color2);\n}\n\n.ssv-log {\n  height: 0;\n  max-height: 20rem;\n  margin: 10px 0 10px 20px;\n  overflow: auto;\n  color: var(--jp-ui-font-color2);\n  display: none;\n  /*white-space-collapse: preserve;*/\n}\n\n.ssv-log-debug {\n  color: var(--jp-ui-font-color2);\n}\n\n.ssv-log-info {\n  color: var(--jp-ui-font-color1);\n}\n\n.ssv-log-warn {\n  color: var(--jp-warn-color1);\n}\n\n.ssv-log-error {\n  color: var(--jp-error-color1);\n}\n\n.ssv-log.ssv-log-active {\n  height: auto;\n  display: block;\n}\n\n.ssv-button {\n  padding: 0 0.5rem;\n  margin-right: 2px;\n  font-family: sans-serif;\n  color: var(--jp-ui-font-color1);\n  background-color: var(--jp-layout-color3);\n  border: 1px solid #ffffff10;\n  border-radius: 3px;\n  height: 2.4rem;\n}\n\n.ssv-button:hover {\n  background-color: var(--jp-layout-color4);\n}\n\n.ssv-button:active {\n  background-color: var(--jp-layout-color2);\n}\n',""]);const r=l},905:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",s=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),s&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),s&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,s,i,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(s)for(var r=0;r<this.length;r++){var a=this[r][0];null!=a&&(l[a]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);s&&l[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),i&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=i):d[4]="".concat(i)),t.push(d))}},t}},12:e=>{e.exports=function(e){return e[1]}},757:(e,t,n)=>{var s=n(534),i=n.n(s),o=n(619),l=n.n(o),r=n(628),a=n.n(r),c=n(991),d=n.n(c),p=n(211),u=n.n(p),m=n(34),h=n.n(m),_=n(487),g={};g.styleTagTransform=h(),g.setAttributes=d(),g.insert=a().bind(null,"head"),g.domAPI=l(),g.insertStyleElement=u(),i()(_.Z,g),_.Z&&_.Z.locals&&_.Z.locals},534:e=>{var t=[];function n(e){for(var n=-1,s=0;s<t.length;s++)if(t[s].identifier===e){n=s;break}return n}function s(e,s){for(var o={},l=[],r=0;r<e.length;r++){var a=e[r],c=s.base?a[0]+s.base:a[0],d=o[c]||0,p="".concat(c," ").concat(d);o[c]=d+1;var u=n(p),m={css:a[1],media:a[2],sourceMap:a[3],supports:a[4],layer:a[5]};if(-1!==u)t[u].references++,t[u].updater(m);else{var h=i(m,s);s.byIndex=r,t.splice(r,0,{identifier:p,updater:h,references:1})}l.push(p)}return l}function i(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,i){var o=s(e=e||[],i=i||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var r=n(o[l]);t[r].references--}for(var a=s(e,i),c=0;c<o.length;c++){var d=n(o[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}o=a}}},628:e=>{var t={};e.exports=function(e,n){var s=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}},211:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},991:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},619:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var s="";n.supports&&(s+="@supports (".concat(n.supports,") {")),n.media&&(s+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(s+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),s+=n.css,i&&(s+="}"),n.media&&(s+="}"),n.supports&&(s+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(s,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},34:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},147:e=>{e.exports=JSON.parse('{"name":"py-ssv","version":"0.4.1","description":"Leverage the power of shaders for scientific visualisation in Jupyter","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets","glsl","shaders","opengl"],"files":["lib/**/*.js","dist/*.js","css/*.css"],"homepage":"https://github.com/space928/Shaders-For-Scientific-Visualisation","bugs":{"url":"https://github.com/space928/Shaders-For-Scientific-Visualisation/issues"},"license":"MIT","author":{"name":"Thomas Mathieson","email":"thomas@mathieson.dev"},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/space928/Shaders-For-Scientific-Visualisation.git"},"scripts":{"build":"jlpm build:lib && jlpm build:labextension:dev && yarn run build:nbextension","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc --sourceMap","build:lib:prod":"tsc","build:nbextension":"webpack","build:prod":"jlpm clean && jlpm build:lib:prod && jlpm build:labextension && yarn run build:nbextension","clean":"jlpm clean:lib","clean:all":"jlpm clean:lib && jlpm clean:labextension && jlpm clean:lintcache && jlpm clean:nbextension","clean:labextension":"rimraf pySSV/labextension pySSV/_version.py","clean:lib":"rimraf lib tsconfig.tsbuildinfo","clean:lintcache":"rimraf .eslintcache .stylelintcache","clean:nbextension":"rimraf pySSV/nbextension/static/index.js","eslint":"jlpm eslint:check --fix","eslint:check":"eslint . --cache --ext .ts,.tsx","install:extension":"jlpm build","lint":"jlpm stylelint && jlpm prettier && jlpm eslint","lint:check":"jlpm stylelint:check && jlpm prettier:check && jlpm eslint:check","prepack":"yarn run build:lib","prettier":"jlpm prettier:base --write --list-different","prettier:base":"prettier \\"**/*{.ts,.tsx,.js,.jsx,.css,.json,.md}\\"","prettier:check":"jlpm prettier:base --check","stylelint":"jlpm stylelint:check --fix","stylelint:check":"stylelint --cache \\"css/**/*.css\\"","test":"jest --coverage","watch":"run-p watch:src watch:labextension","watch:labextension":"jupyter labextension watch .","watch:lib":"tsc -w","watch:nbextension":"webpack --watch --mode=development","watch:src":"tsc -w --sourceMap"},"dependencies":{"@jupyter-widgets/base":"^1.1.10 || ^2 || ^3 || ^4 || ^5 || ^6"},"devDependencies":{"@babel/core":"^7.5.0","@babel/preset-env":"^7.5.0","@jupyter-widgets/base-manager":"^1.0.2","@jupyterlab/builder":"^4.0.0","@jupyterlab/testutils":"^4.0.0","@lumino/application":"^2.0.1","@lumino/widgets":"^2.0.1","@types/jest":"^29.2.0","@types/json-schema":"^7.0.11","@types/react":"^18.0.26","@types/react-addons-linked-state-mixin":"^0.14.22","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^6.1.0","@typescript-eslint/parser":"^6.1.0","acorn":"^7.2.0","css-loader":"^6.7.1","eslint":"^8.36.0","eslint-config-prettier":"^8.8.0","eslint-plugin-prettier":"^5.0.0","fs-extra":"^7.0.0","identity-obj-proxy":"^3.0.0","jest":"^29.2.0","mkdirp":"^0.5.1","npm-run-all":"^4.1.5","prettier":"^3.0.0","rimraf":"^5.0.1","source-map-loader":"^1.0.2","style-loader":"^3.3.1","stylelint":"^15.10.1","stylelint-config-recommended":"^13.0.0","stylelint-config-standard":"^34.0.0","stylelint-csstree-validator":"^3.0.0","stylelint-prettier":"^4.0.0","ts-jest":"^29.0.0","ts-loader":"^8.0.0","typescript":"~5.2.2","webpack":"^5.61.0","webpack-cli":"^4.0.0","yjs":"^13.5.40"},"jupyterlab":{"extension":"lib/plugin","outputDir":"pySSV/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}},"eslintConfig":{"extends":["eslint:recommended","plugin:@typescript-eslint/eslint-recommended","plugin:@typescript-eslint/recommended","plugin:prettier/recommended"],"parser":"@typescript-eslint/parser","parserOptions":{"project":"tsconfig.json","sourceType":"module"},"plugins":["@typescript-eslint"],"rules":{"@typescript-eslint/naming-convention":["error",{"selector":"interface","format":["PascalCase"],"custom":{"regex":"^I[A-Z]","match":true}}],"@typescript-eslint/no-unused-vars":["warn",{"args":"none"}],"@typescript-eslint/no-explicit-any":"off","@typescript-eslint/no-namespace":"off","@typescript-eslint/no-use-before-define":"off","@typescript-eslint/quotes":["warn","double",{"avoidEscape":true,"allowTemplateLiterals":false}],"curly":["error","multi-or-nest","consistent"],"eqeqeq":"error","prefer-arrow-callback":"error","function-call-argument-newline":["warn","consistent"],"function-paren-newline":"off"}},"eslintIgnore":["node_modules","dist","coverage","**/*.d.ts","tests","**/__tests__","ui-tests"],"prettier":{"singleQuote":false,"trailingComma":"none","arrowParens":"avoid","endOfLine":"auto","overrides":[{"files":"package.json","options":{"tabWidth":4}}]},"stylelint":{"extends":["stylelint-config-recommended","stylelint-config-standard","stylelint-prettier/recommended"],"plugins":["stylelint-csstree-validator"],"rules":{"csstree/validator":true,"property-no-vendor-prefix":null,"selector-no-vendor-prefix":null,"value-no-vendor-prefix":null}},"styleModule":"css/index.js"}')}}]);