(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[966],{5458:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return s(3188)}])},3188:function(e,n,s){"use strict";s.r(n);var t=s(5893),l=s(9008),i=s.n(l),r=s(7357),a=s(5582),c=s(6447),o=s(5861),d=s(1426),u=s(3321),h=s(8334),x=s(8238),m=s(5234),f=s(6228),j=s(7294),v=s(9828);let g=()=>{let[e,n]=(0,j.useState)({}),[s,l]=(0,j.useState)("");return(0,j.useEffect)(()=>{let e=async()=>{if(f.I.currentUser){let e=(0,v.JU)(f.db,"users",f.I.currentUser.uid);l(f.I.currentUser.uid);let t=await (0,v.QT)(e),i=t.data();i&&(n(i),console.log("here",i),clearInterval(s))}},s=setInterval(e,100);return()=>clearInterval(s)},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"Account | TieUi"})}),(0,t.jsx)(r.Z,{component:"main",sx:{flexGrow:1,py:8},children:(0,t.jsx)(a.Z,{maxWidth:"lg",children:(0,t.jsxs)(c.Z,{spacing:3,children:[(0,t.jsx)("div",{children:(0,t.jsx)(o.Z,{variant:"h4",children:"Account"})}),(0,t.jsx)("div",{children:(0,t.jsxs)(d.Z,{container:!0,spacing:3,children:[(0,t.jsx)(d.Z,{xs:12,md:6,lg:4,children:(0,t.jsx)(x.d,{})}),(0,t.jsxs)("div",{children:["You have: ",e.NumSubscriptions," Active subscriptions. Need More?",(0,t.jsx)(u.Z,{onClick:()=>{window.location.href=window.location.origin+"/settings"},children:"Add subscriptions"})]}),[...Array(e.NumSubscriptions)].map((n,l)=>{var i;return(0,t.jsx)(d.Z,{xs:12,md:6,lg:8,children:""!==s&&e.linkedAccounts&&0!==Object.keys(e.linkedAccounts).length?(0,t.jsx)(m.i,{length:e.NumSubscriptions,user:(null===(i=e.linkedAccounts)||void 0===i?void 0:i.length)>l?e.linkedAccounts[parseInt(l)]:null,uid:s}):null},l)})]})})]})})})]})};g.getLayout=e=>(0,t.jsx)(h.A,{children:e}),n.default=g},5234:function(e,n,s){"use strict";s.d(n,{i:function(){return j}});var t=s(5893),l=s(7294),i=s(6242),r=s(8445),a=s(4267),c=s(7357),o=s(1426),d=s(135),u=s(7720),h=s(2023),x=s(3321),m=s(6228),f=s(9828);let j=e=>{let{user:n,uid:s,length:j}=e;console.log(s),console.log(n);let[v,g]=(0,l.useState)(""),[Z,p]=(0,l.useState)({firstName:(null==n?void 0:n.firstName)||"",lastName:(null==n?void 0:n.lastName)||"",email:(null==n?void 0:n.email)||"",userId:(null==n?void 0:n.userId)||""}),[I,b]=(0,l.useState)({firstName:(null==n?void 0:n.firstName)||"",lastName:(null==n?void 0:n.lastName)||"",email:(null==n?void 0:n.email)||"",userId:(null==n?void 0:n.userId)||""}),k=(0,l.useCallback)(e=>{p(n=>({...n,[e.target.name]:e.target.value}))},[]),A=(0,l.useCallback)(async e=>{e.preventDefault(),console.log("inside handle submit"),console.log(n),console.log(s),console.log(Z);let t=(0,f.JU)(m.db,"users",s);try{let e=await (0,f.QT)(t),n=e.data();console.log("I AM THGEB ONE",n.linkedAccounts),console.log(I);let s=n.linkedAccounts.some(e=>e.userId===I.userId),l=!1;if(n&&s){let e=n.linkedAccounts.filter(e=>e.userId!==I.userId);l=!0,e.push(Z),await (0,f.r7)(t,{linkedAccounts:(0,f.vr)(),linkedAccounts:e})}else console.log(n.linkedAccounts.length),console.log(j),n.linkedAccounts.length<=j&&await (0,f.r7)(t,{linkedAccounts:(0,f.vr)(Z)});console.log("Linked account updated successfully!");let i=(0,f.JU)(m.db,"users",Z.userId),r=await (0,f.QT)(i);if(r.data(),await (0,f.r7)(i,{isPaidUser:!0}),l){l=!1;let e=(0,f.JU)(m.db,"users",I.userId),n=await (0,f.QT)(e);n.data(),await (0,f.r7)(e,{isPaidUser:!1})}}catch(e){console.error("Error updating linked account:",e)}},[s,Z,n]);return(0,t.jsx)("form",{autoComplete:"off",noValidate:!0,onSubmit:A,children:(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(r.Z,{subheader:"The information can be edited",title:"Connected Accounts Profile"}),(0,t.jsx)(a.Z,{sx:{pt:0},children:(0,t.jsx)(c.Z,{sx:{m:-1.5},children:(0,t.jsxs)(o.Z,{container:!0,spacing:3,children:[(0,t.jsx)(o.Z,{xs:12,md:6,children:(0,t.jsx)(d.Z,{fullWidth:!0,helperText:"Please specify the first name",label:"First name",name:"firstName",onChange:k,required:!0,value:Z.firstName})}),(0,t.jsx)(o.Z,{xs:12,md:6,children:(0,t.jsx)(d.Z,{fullWidth:!0,label:"Last name",name:"lastName",onChange:k,required:!0,value:Z.lastName})}),(0,t.jsx)(o.Z,{xs:12,md:6,children:(0,t.jsx)(d.Z,{fullWidth:!0,label:"Email Address",name:"email",onChange:k,required:!0,value:Z.email})}),(0,t.jsx)(o.Z,{xs:12,md:6,children:(0,t.jsx)(d.Z,{fullWidth:!0,label:"User Id",name:"userId",onChange:k,type:"String",value:Z.userId})})]})})}),(0,t.jsx)(u.Z,{}),(0,t.jsx)(h.Z,{sx:{justifyContent:"flex-end"},children:(0,t.jsx)(x.Z,{variant:"contained",onClick:A,children:"Save details"})})]})})}},8238:function(e,n,s){"use strict";s.d(n,{d:function(){return j}});var t=s(5893),l=s(6242),i=s(4267),r=s(7357),a=s(9661),c=s(5861),o=s(7720),d=s(2023),u=s(3321),h=s(6228),x=s(7294),m=s(9828);let f={avatar:"/assets/avatars/avatar-anika-visser.png",city:"Los Angeles",country:"USA",jobTitle:"Senior Developer",name:"Anika Visser",timezone:"GTM-7"},j=()=>{let[e,n]=(0,x.useState)({}),[s,j]=(0,x.useState)("");return(0,x.useEffect)(()=>{let e=async()=>{if(h.I.currentUser){let e=(0,m.JU)(h.db,"users",h.I.currentUser.uid);j(h.I.currentUser.uid);let t=await (0,m.QT)(e),l=t.data();l&&(n(l),console.log(l),clearInterval(s))}},s=setInterval(e,100);return()=>clearInterval(s)},[]),(0,t.jsxs)(l.Z,{children:[(0,t.jsx)(i.Z,{children:(0,t.jsxs)(r.Z,{sx:{alignItems:"center",display:"flex",flexDirection:"column"},children:[(0,t.jsx)(a.Z,{src:f.avatar,sx:{height:80,mb:2,width:80}}),(0,t.jsx)(c.Z,{gutterBottom:!0,variant:"h5",children:e.name}),(0,t.jsx)(c.Z,{color:"text.secondary",variant:"body2",children:s}),(0,t.jsx)(c.Z,{color:"text.secondary",variant:"body2",children:e.timezone})]})}),(0,t.jsx)(o.Z,{}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(u.Z,{fullWidth:!0,variant:"text",children:"Upload picture"})})]})}}},function(e){e.O(0,[16,737,321,952,177,85,664,850,135,688,11,290,334,774,888,179],function(){return e(e.s=5458)}),_N_E=e.O()}]);