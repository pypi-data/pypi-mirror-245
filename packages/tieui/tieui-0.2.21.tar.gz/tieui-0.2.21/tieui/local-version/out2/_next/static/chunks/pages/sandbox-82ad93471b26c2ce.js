(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{2199:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sandbox",function(){return n(7570)}])},6222:function(e,t,n){"use strict";n.d(t,{g:function(){return u}});var r=n(5893),o=n(7294);let s=o.forwardRef(function({title:e,titleId:t,...n},r){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:r,"aria-labelledby":t},n),e?o.createElement("title",{id:t},e):null,o.createElement("path",{fillRule:"evenodd",d:"M4.5 5.653c0-1.426 1.529-2.33 2.779-1.643l11.54 6.348c1.295.712 1.295 2.573 0 3.285L7.28 19.991c-1.25.687-2.779-.217-2.779-1.643V5.653z",clipRule:"evenodd"}))});var a=n(6242),l=n(7357),i=n(7709),c=n(7109),d=n(3219),h=n(3321);let u=e=>{let{onResponse:t,uid:n}=e,[u,p]=(0,o.useState)(""),f=e=>{p(e.target.value)},x=async()=>{try{let e=await fetch("http://localhost:8080/register-app/"+n+u,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let e=new URL(window.location.href);e.searchParams.append("appName",n+u),window.history.pushState({},"",e.toString()),window.location.reload()}else{let t=await e.text();console.error("Error registering the app:",t)}}catch(e){console.error("Error:",e)}};return(0,r.jsxs)(a.Z,{sx:{p:4,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,r.jsx)(l.Z,{sx:{mb:2,display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},children:(0,r.jsx)(i.Z,{value:u,fullWidth:!0,placeholder:"New Dashboard Name",startAdornment:(0,r.jsx)(c.Z,{position:"start",children:(0,r.jsx)(d.Z,{color:"action",fontSize:"small",children:(0,r.jsx)(s,{})})}),sx:{maxWidth:500},onChange:f,onKeyPress:e=>{"Enter"===e.key&&x()}})}),(0,r.jsx)(h.Z,{variant:"contained",onClick:x,children:"Get Started"})]})}},7330:function(e,t,n){"use strict";n.r(t);var r=n(5893),o=n(7294),s=n(3321);class a extends o.Component{componentDidUpdate(e){if(this.props.input!==e.input){let{input:e}=this.props;this.setState({input:e&&null!==e.code?e.code:""})}}render(){return console.log("from parent",this.state.input),(0,r.jsxs)("div",{style:{display:"inline-grid"},children:[(0,r.jsx)("textarea",{className:"code-input",value:null!==this.state.input?this.state.input:this.state.pythonCode,onChange:this.handleCodeChange,placeholder:"Enter Python code here",style:{width:"30rem",height:"30rem"}}),(0,r.jsx)(s.Z,{onClick:this.handleGenerateUI,children:"Generate UI"})]})}constructor(e){super(e),this.handleCodeChange=e=>{null===this.state.input?this.setState({pythonCode:e.target.value}):this.setState({input:e.target.value})},this.handleGenerateUI=async()=>{try{let e=null===this.state.input?this.state.pythonCode:this.state.input,{appName:t}=function(){let e=window.location.search.substring(0);return Object.fromEntries(new URLSearchParams(e))}(),n=await fetch("http://localhost:8080/execute_python_code/"+t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pythonCode:e})});if(n.ok){let e=await n.json();console.log("Python code execution result:",e.result)}else console.error("Error executing Python code:",n.statusText)}catch(e){console.error("Error:",e)}};let{input:t}=e;this.state={pythonCode:"",input:t&&null!==t.code?t.code:""}}}t.default=a},7570:function(e,t,n){"use strict";n.r(t);var r=n(5893),o=n(9008),s=n.n(o),a=n(1163),l=n(7357),i=n(5582),c=n(5861),d=n(3321),h=n(8334),u=n(1962),p=n(7330),f=n(5566),x=n(6222),w=n(6228),m=n(9828),y=n(7294);let g=()=>{let e=(0,a.useRouter)(),t=e.query.appName,{sharedData:n}=(0,f.e)(),[o,h]=(0,y.useState)({}),[g,j]=(0,y.useState)(""),[v,C]=(0,y.useState)(!1);return(0,y.useEffect)(()=>{let t=async()=>{if(w.I.currentUser){let e=(0,m.JU)(w.db,"users",w.I.currentUser.uid);j(w.I.currentUser.uid);let t=await (0,m.QT)(e),n=t.data();n&&(h(n),n.isPaidUser||C(!0),console.log("here",n),clearInterval(o))}},{appName:n}=function(){let e=window.location.search.substring(0);return Object.fromEntries(new URLSearchParams(e))}(),r=async()=>{if(console.log(" I AM THE BEST ONE HERE "),n)try{let e=await fetch("http://localhost:8080/stop_subprocess/".concat(n),{method:"POST",headers:{"Content-Type":"application/json"}});e.ok?console.log("POST request on unload successful"):console.error("HTTP error! Status: ".concat(e.status," - ").concat(e.statusText))}catch(e){console.error("Error:",e)}},o=setInterval(t,100);return window.addEventListener("beforeunload",r),e.events.on("routeChangeStart",r),()=>{e.events.off("routeChangeStart",r),window.removeEventListener("beforeunload",r),clearInterval(o)}},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsx)("title",{children:"Sandbox | TieUi"})}),t?(0,r.jsx)(l.Z,{component:"main",sx:{flexGrow:1,py:8,display:"flex"},children:(0,r.jsxs)(i.Z,{maxWidth:"xl",style:{display:"flex"},children:[(0,r.jsx)("div",{className:"left-pane",style:{flex:1},children:(0,r.jsx)(p.default,{input:null==n?{code:null}:n})}),(0,r.jsx)("div",{className:"right-pane",style:{flex:1},children:(0,r.jsx)(u.default,{aName:null})})]})}):(0,r.jsxs)("div",{children:[v&&(0,r.jsxs)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",zIndex:1},children:[(0,r.jsx)(c.Z,{variant:"h5",children:"Custom Names are paid features"}),(0,r.jsx)(d.Z,{variant:"contained",color:"primary",onClick:()=>{window.location.href=window.location.origin+"/settings"},children:"Learn About our plans"}),(0,r.jsx)(d.Z,{color:"primary",onClick:async()=>{console.log(g);try{let e=await fetch("http://localhost:8080/register-app/"+g,{method:"POST",headers:{"Content-Type":"application/json"}});if(e.ok){let e=new URL(window.location.href);e.searchParams.append("appName",g),window.history.pushState({},"",e.toString()),window.location.reload()}else{let t=await e.text();console.error("Error registering the app:",t)}}catch(e){console.error("Error:",e)}},children:"Create App with Free Name"})]}),(0,r.jsx)("div",{style:{filter:v?"blur(1px)":"none"},children:(0,r.jsx)(x.g,{uid:g,onResponse:void 0})})]})]})};g.getLayout=e=>(0,r.jsx)(h.A,{children:e}),t.default=g}},function(e){e.O(0,[16,737,321,952,177,85,664,850,135,688,678,162,72,806,515,334,573,774,888,179],function(){return e(e.s=2199)}),_N_E=e.O()}]);