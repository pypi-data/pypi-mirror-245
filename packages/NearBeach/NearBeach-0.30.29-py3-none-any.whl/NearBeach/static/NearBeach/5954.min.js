"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[5954],{1713:(e,t,o)=>{o.d(t,{Z:()=>U});var d=o(6252),l=o(9963);const a={class:"modal fade",id:"addFolderModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i={class:"modal-dialog modal-lg"},n={class:"modal-content"},s={class:"modal-header"},r=(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addFolderCloseButton"},[(0,d._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={class:"row"},m=(0,d._)("div",{class:"col-md-4"},[(0,d._)("strong",null,"Creating a folder"),(0,d._)("p",{class:"text-instructions"},' Give the folder an appropriate name. When done, click on the "Save" button. It will be added to the current folder. ')],-1),p={class:"col-md-8"},h={class:"form-group"},b=(0,d._)("label",{for:"folder_description"},"Folder Name",-1),g={class:"modal-footer"},_=(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),f=["disabled"];var y=o(6542),D=o(989),v=o(3058),F=o(5808),k=o(3138);const M={name:"AddFolderWizard",components:{Icon:y.JO},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},mixins:[v.Z,F.Z],data:()=>({disableAddFolderButton:!0,folderDescriptionModel:""}),computed:{...(0,D.Se)({existingFolders:"getFolderFilteredList",currentFolder:"getCurrentFolder",rootUrl:"getRootUrl"})},methods:{addFolder(){const e=new FormData;e.set("folder_description",this.folderDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_folder/`,e).then((e=>{this.$store.dispatch("appendFolderList",{folderList:e.data[0]}),this.folderDescriptionModel="",document.getElementById("addFolderCloseButton").click();let t=document.getElementById("cardInformationModal");null!==t&&(t=new k.u_(t),t.show())})).catch((e=>{this.showErrorModal(e,this.destination)}))}},updated(){const e=this.existingFolders.filter((e=>e.fields.folder_description===this.folderDescriptionModel));this.disableAddFolderButton=e.length>0||""===this.folderDescriptionModel||null===this.folderDescriptionModel}},U=(0,o(3744).Z)(M,[["render",function(e,t,o,y,D,v){const F=(0,d.up)("Icon");return(0,d.wg)(),(0,d.iD)("div",a,[(0,d._)("div",i,[(0,d._)("div",n,[(0,d._)("div",s,[(0,d._)("h2",null,[(0,d.Wm)(F,{icon:e.icons.userIcon},null,8,["icon"]),(0,d.Uk)(" Add Folder Wizard ")]),r]),(0,d._)("div",c,[(0,d._)("div",u,[m,(0,d._)("div",p,[(0,d._)("div",h,[b,(0,d.wy)((0,d._)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>D.folderDescriptionModel=e),class:"form-control",id:"folder_description",maxlength:"50"},null,512),[[l.vModelText,D.folderDescriptionModel]])])])])]),(0,d._)("div",g,[_,(0,d._)("button",{type:"button",class:"btn btn-primary",disabled:D.disableAddFolderButton,onClick:t[1]||(t[1]=(...e)=>v.addFolder&&v.addFolder(...e))}," Add Folder ",8,f)])])])])}]])},6200:(e,t,o)=>{o.d(t,{Z:()=>$});var d=o(6252),l=o(9963);const a={class:"modal fade",id:"addLinkModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},i={class:"modal-dialog modal-lg"},n={class:"modal-content"},s={class:"modal-header"},r=(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addLinkCloseButton"},[(0,d._)("span",{"aria-hidden":"true"})],-1),c={class:"modal-body"},u={class:"row"},m=(0,d._)("div",{class:"col-md-4"},[(0,d._)("strong",null,"Add Link"),(0,d._)("p",{class:"text-instruction"}," Add hyperlinks to other documents and sources located in on the internet/cloud. ")],-1),p={class:"col-md-8"},h={class:"form-group"},b={for:"document_description"},g={key:0,class:"error"},_={class:"form-group"},f={for:"document_url_location"},y={class:"modal-footer"},D=(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),v=["disabled"];var F=o(6542),k=o(989),M=o(5808),U=o(5705),x=o(760),w=o(7939),I=o(3138);const L={name:"AddLinkWizard",setup:()=>({v$:(0,U.ZP)()}),components:{Icon:F.JO,ValidationRendering:w.Z},props:{destination:{type:String,default:"/"},locationId:{type:Number,default:0}},mixins:[M.Z],data:()=>({linkModel:"",disableAddButton:!0,documentDescriptionModel:"",documentUrlLocationModel:"",duplicateDescription:!1}),validations:{documentDescriptionModel:{required:x.C1},documentUrlLocationModel:{required:x.C1,url:x.HQ}},computed:{...(0,k.Se)({currentFolder:"getCurrentFolder",excludeDocuments:"getDocumentFilteredList",rootUrl:"getRootUrl"})},methods:{addLink(){const e=new FormData;e.set("document_description",this.documentDescriptionModel),e.set("document_url_location",this.documentUrlLocationModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/add_link/`,e).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),this.documentDescriptionModel="",this.documentUrlLocationModel="",document.getElementById("addLinkCloseButton").click();let t=document.getElementById("cardInformationModal");null!==t&&(t=new I.u_(t),t.show())})).catch((e=>{this.$store.dispatch("newToast",{header:"Error Adding Link",message:`Sorry, could not add the link for you. Error - ${e}`,extra_classes:"bg-danger",delay:0})}))}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.duplicateDescription=e.length>0,this.v$.$touch(),this.disableAddButton=this.v$.$invalid||e.length>0}},$=(0,o(3744).Z)(L,[["render",function(e,t,o,F,k,M){const U=(0,d.up)("Icon"),x=(0,d.up)("validation-rendering");return(0,d.wg)(),(0,d.iD)("div",a,[(0,d._)("div",i,[(0,d._)("div",n,[(0,d._)("div",s,[(0,d._)("h2",null,[(0,d.Wm)(U,{icon:e.icons.userIcon},null,8,["icon"]),(0,d.Uk)(" Add Link Wizard ")]),r]),(0,d._)("div",c,[(0,d._)("div",u,[m,(0,d._)("div",p,[(0,d._)("div",h,[(0,d._)("label",b,[(0,d.Uk)(" Document Description "),(0,d.Wm)(x,{"error-list":F.v$.documentDescriptionModel.$errors},null,8,["error-list"]),k.duplicateDescription?((0,d.wg)(),(0,d.iD)("span",g," Sorry - but this is a duplicated description.")):(0,d.kq)("v-if",!0)]),(0,d.wy)((0,d._)("input",{id:"document_description","onUpdate:modelValue":t[0]||(t[0]=e=>k.documentDescriptionModel=e),class:"form-control",maxlength:"50",placeholder:"NearBeach Homepage"},null,512),[[l.vModelText,k.documentDescriptionModel]])]),(0,d._)("div",_,[(0,d._)("label",f,[(0,d.Uk)(" Document URL "),(0,d.Wm)(x,{"error-list":F.v$.documentUrlLocationModel.$errors},null,8,["error-list"])]),(0,d.wy)((0,d._)("input",{id:"document_url_location","onUpdate:modelValue":t[1]||(t[1]=e=>k.documentUrlLocationModel=e),class:"form-control",placeholder:"https://nearbeach.org"},null,512),[[l.vModelText,k.documentUrlLocationModel]])])])])]),(0,d._)("div",y,[D,(0,d._)("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=(...e)=>M.addLink&&M.addLink(...e)),disabled:k.disableAddButton}," Add Link ",8,v)])])])])}]])},2551:(e,t,o)=>{o.d(t,{Z:()=>p});var d=o(6252);const l={class:"modal fade",id:"confirmFileDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmFileDelete","aria-hidden":"true"},a={class:"modal-dialog"},i={class:"modal-content"},n=(0,d._)("div",{class:"modal-header"},[(0,d._)("h5",{class:"modal-title",id:"confirmFileDelete"}," Please confirm File Deletion "),(0,d.kq)(" TASK INFORMATION "),(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmFileDeleteButton"})],-1),s=(0,d._)("div",{class:"modal-body"}," Are you sure you want to delete the file? ",-1),r={class:"modal-footer"};var c=o(989),u=o(3138);const m={name:"ConfirmFileDelete",computed:{...(0,c.Se)({destination:"getDestination",documentRemoveKey:"getDocumentRemoveKey",locationId:"getLocationId",rootUrl:"getRootUrl"})},methods:{deleteFile(){if(""===this.documentRemoveKey)return;const e=this.documentRemoveKey,t=new FormData;t.set("document_key",this.documentRemoveKey),this.axios.post(`${this.rootUrl}documentation/${this.destination}/${this.locationId}/remove/`,t).then((()=>{this.$store.dispatch("removeDocument",{document_key:e}),this.closeModal()})).catch((e=>{this.$store.dispatch("newToast",{header:"Error removing file",message:`We could not remove your file. Error - ${e}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:""}),document.getElementById("confirmFileDeleteButton").click();let e=document.getElementById("cardInformationModal");null!==e&&(e=new u.u_(e),e.show()),setTimeout((()=>{const e=document.getElementsByClassName("modal-backdrop fade show");e.length>1&&e[0].remove()}),200)}}},p=(0,o(3744).Z)(m,[["render",function(e,t,o,c,u,m){return(0,d.wg)(),(0,d.iD)("div",l,[(0,d._)("div",a,[(0,d._)("div",i,[n,s,(0,d._)("div",r,[(0,d._)("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=(...e)=>m.closeModal&&m.closeModal(...e))}," No "),(0,d._)("button",{type:"button",class:"btn btn-primary",onClick:t[1]||(t[1]=(...e)=>m.deleteFile&&m.deleteFile(...e))}," Yes ")])])])])}]])},9586:(e,t,o)=>{o.d(t,{Z:()=>O});var d=o(6252),l=o(3577),a=o(9963);const i={class:"modal fade",id:"uploadDocumentModal","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},n={class:"modal-dialog modal-lg"},s={class:"modal-content"},r={class:"modal-header"},c=(0,d._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"uploadDocumentCloseButton"},[(0,d._)("span",{"aria-hidden":"true"})],-1),u={class:"modal-body"},m={class:"row"},p={class:"col-md-4"},h=(0,d._)("strong",null,"Uploading File",-1),b={class:"text-instructions"},g={key:0},_={key:1},f={key:2},y={class:"col-md-8"},D={key:0,class:"form-file"},v={class:"mb-3"},F={for:"document",class:"form-label"},k=(0,d._)("br",null,null,-1),M={key:0,class:"alert alert-warning"},U=["accept"],x={key:1,class:"form-group"},w={class:"form-group"},I=(0,d._)("label",{for:"documentDescription"},"Document Description",-1),L=(0,d._)("br",null,null,-1),$={class:"form-row"},B={key:2},C={key:0,class:"alert alert-warning"},S=(0,d._)("div",{class:"spinner-border text-primary",role:"status"},[(0,d._)("span",{class:"sr-only"},"Loading...")],-1),T=(0,d._)("div",{class:"alert alert-success"}," The document has been uploaded. The server is currently writing the file to disk. Please be patient - this modal will close automatically. Thank you ",-1),E={class:"modal-footer"},A=(0,d._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),R=["disabled"];var P=o(6542),z=o(989),N=o(5808),W=o(3138);const Z={name:"UploadDocumentWizard",components:{Icon:P.JO},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0}},mixins:[N.Z],data:()=>({disableUploadButton:!0,documentModel:[],documentDescriptionModel:"",uploadPercentage:"",maxUploadSize:0,maxUploadString:"No Upload Limit",maxUploadWarning:!1}),computed:{...(0,z.Se)({acceptedDocuments:"getAcceptedDocuments",currentFolder:"getCurrentFolder",destination:"getDestination",excludeDocuments:"getDocumentFilteredList",locationId:"getLocationId",staticUrl:"getStaticUrl",rootUrl:"getRootUrl"})},methods:{getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},handleFileUploads(e){e[0].size*(0!==this.maxUploadSize)>this.maxUploadSize?this.maxUploadWarning=!0:(this.maxUploadWarning=!1,this.documentModel=e[0],this.documentDescriptionModel=e[0].name)},resetForm(){this.documentModel="",this.documentDescriptionModel="",this.uploadPercentage=""},uploadFile(){const e=new FormData;e.set("document",this.documentModel,this.documentDescriptionModel),e.set("document_description",this.documentDescriptionModel),this.currentFolder>0&&e.set("parent_folder",this.currentFolder);const t={onUploadProgress:e=>{this.uploadPercentage=parseFloat(e.loaded)/parseFloat(e.total)}};this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/upload/`,e,t).then((e=>{this.$store.dispatch("appendDocumentList",{documentList:e.data[0]}),document.getElementById("uploadDocumentCloseButton").click(),this.resetForm();let t=document.getElementById("cardInformationModal");null!==t&&(t=new W.u_(t),t.show())})).catch((e=>{this.$store.dispatch("newToast",{header:"Failed to upload documentation",message:`Can not upload the documentation. ${e}`,extra_classes:"bg-danger",delay:0})}))}},watch:{maxUploadSize(){if(0===this.maxUploadSize)return"No Upload Limit";const e=Math.floor(Math.log(this.maxUploadSize)/Math.log(1024));this.maxUploadString=`Max Upload Size: ${parseFloat((this.maxUploadSize/Math.pow(1024,e)).toFixed(2))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}`}},updated(){const e=this.excludeDocuments.filter((e=>e.document_key__document_description===this.documentDescriptionModel));this.disableUploadButton=""===this.documentModel||0===this.documentDescriptionModel.length||e.length>0},mounted(){this.$nextTick((()=>{this.axios.post(`${this.rootUrl}documentation/get/max_upload/`).then((e=>{this.maxUploadSize=e.data.max_upload_size})).catch((()=>{this.$store.dispatch("newToast",{header:"Failed to get the max upload size",message:`Had an issue getting data from backend. ${this.maxUploadString}`,extra_classes:"bg-danger",delay:0})}))}))}},O=(0,o(3744).Z)(Z,[["render",function(e,t,o,P,z,N){const W=(0,d.up)("Icon");return(0,d.wg)(),(0,d.iD)("div",i,[(0,d._)("div",n,[(0,d._)("div",s,[(0,d._)("div",r,[(0,d._)("h2",null,[(0,d.Wm)(W,{icon:e.icons.userIcon},null,8,["icon"]),(0,d.Uk)(" Upload Document Wizard ")]),c]),(0,d._)("div",u,[(0,d._)("div",m,[(0,d._)("div",p,[h,(0,d._)("p",b," You will be able to upload a file against this "+(0,l.toDisplayString)(N.getDestination)+". It will appear in the current folder. ",1),0===z.documentModel.length?((0,d.wg)(),(0,d.iD)("p",g,' 1. Please click on "Upload File" button to upload a file ')):""===z.uploadPercentage?((0,d.wg)(),(0,d.iD)("p",_,' 2. Please modify the document descript to be more human readable. Or click the "Reset" button to remove the uploaded file. ')):((0,d.wg)(),(0,d.iD)("p",f," 3. Document is currently uploading. Please be patient. "))]),(0,d._)("div",y,[0===z.documentModel.length?((0,d.wg)(),(0,d.iD)("div",D,[(0,d._)("div",v,[(0,d._)("label",F,[(0,d.Uk)(" Please upload a file"),k,(0,d.Uk)(" "+(0,l.toDisplayString)(z.maxUploadString)+" ",1),z.maxUploadWarning?((0,d.wg)(),(0,d.iD)("div",M," Sorry - file too large ")):(0,d.kq)("v-if",!0)]),(0,d._)("input",{type:"file",class:"form-control",id:"document",accept:e.acceptedDocuments,onChange:t[0]||(t[0]=e=>N.handleFileUploads(e.target.files))},null,40,U)])])):""==z.uploadPercentage?((0,d.wg)(),(0,d.iD)("div",x,[(0,d.kq)(" DOCUMENT DESCRIPTION "),(0,d._)("div",w,[I,(0,d.wy)((0,d._)("input",{id:"documentDescription","onUpdate:modelValue":t[1]||(t[1]=e=>z.documentDescriptionModel=e),type:"text",class:"form-control"},null,512),[[a.vModelText,z.documentDescriptionModel]])]),(0,d.kq)(" RESET FORM BUTTON "),L,(0,d._)("div",$,[(0,d._)("button",{onClick:t[2]||(t[2]=(...e)=>N.resetForm&&N.resetForm(...e)),class:"btn btn-warning"}," Reset Form ")])])):((0,d.wg)(),(0,d.iD)("div",B,[(0,d.kq)(" THE UPLOAD SPINNER "),parseFloat(z.uploadPercentage).toFixed(0)<1?((0,d.wg)(),(0,d.iD)("div",C,[(0,d.Uk)(" Uploading "+(0,l.toDisplayString)((100*parseFloat(z.uploadPercentage)).toFixed(2))+"% ",1),S])):((0,d.wg)(),(0,d.iD)(d.HY,{key:1},[(0,d.kq)(" THE FINAL WRITING "),T],2112))]))])])]),(0,d._)("div",E,[A,(0,d._)("button",{type:"button",class:"btn btn-primary",disabled:z.disableUploadButton,onClick:t[3]||(t[3]=(...e)=>N.uploadFile&&N.uploadFile(...e))}," Upload File ",8,R)])])])])}]])}}]);