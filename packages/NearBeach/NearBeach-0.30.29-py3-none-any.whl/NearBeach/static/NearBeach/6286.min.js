"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[6286],{4145:(t,e,o)=>{o.d(e,{Z:()=>I});var i=o(6252),n=o(3577);const s={class:"text-instructions"},r={key:0,class:"module-spacer"},l=[(0,i._)("div",{class:"alert alert-dark"}," Sorry - there are no documents or folders uploaded. ",-1)],d={key:1,class:"document--widget"},c=(0,i._)("p",{class:"text-instructions"},"Go to Parent Directory...",-1),a=["onClick"],u={class:"text-instructions"},m=["href"],p={class:"text-instructions"},g={key:0,class:"document--remove"},h=(0,i._)("hr",null,null,-1),D={key:2,class:"btn-group save-changes"},y={key:0,class:"btn btn-primary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},k={class:"dropdown-menu"};var _=o(3138),f=o(6542),v=o(5808),w=o(989);const L={name:"DocumentsModule",components:{Icon:f.JO},props:{overrideDestination:{type:String,default:""},overrideLocationId:{type:Number,default:0},readOnly:{type:Boolean,default:!1}},mixins:[v.Z],computed:{...(0,w.Se)({currentFolder:"getCurrentFolder",destination:"getDestination",documentFilteredList:"getDocumentFilteredList",documentObjectCount:"getDocumentObjectCount",folderFilteredList:"getFolderFilteredList",locationId:"getLocationId",userLevel:"getUserLevel",rootUrl:"getRootUrl"})},watch:{overrideLocationId(){this.getDocumentList(),this.getFolderList()}},methods:{addFolder(){const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new _.u_(document.getElementById("addFolderModal")).show()},addLink(){const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new _.u_(document.getElementById("addLinkModal")).show()},confirmFileDelete(t){this.$store.commit({type:"updateDocumentRemoveKey",documentRemoveKey:t});const e=document.getElementById("cardInformationModalCloseButton");null!==e&&e.click(),new _.u_(document.getElementById("confirmFileDeleteModal")).show()},getDestination(){return""!==this.overrideDestination?this.overrideDestination:this.destination},getDocumentList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/files/`).then((t=>{this.$store.commit({type:"updateDocumentList",documentList:t.data})})).catch((t=>{this.$store.dispatch("newToast",{header:"Error getting Document List",message:`Can not retrieve document list. Error -> ${t}`,extra_classes:"bg-danger",delay:0})}))},getFolderList(){0!==this.getLocationId()&&this.axios.post(`${this.rootUrl}documentation/${this.getDestination()}/${this.getLocationId()}/list/folders/`).then((t=>{this.$store.commit({type:"updateFolderList",folderList:t.data})}))},getIcon(t){if(""!==t.document_key__document_url_location&&null!==t.document_key__document_url_location)return this.icons.linkOut;const e=t.document_key__document.split(".");switch(e[e.length-1]){case"jpg":case"png":case"bmp":return this.icons.imageIcon;case"doc":case"docx":return this.icons.microsoftWord;case"xls":case"xlsx":return this.icons.microsoftExcel;case"ppt":case"pptx":return this.icons.microsoftPowerpoint;case"pdf":return this.icons.documentPdf;default:return this.icons.documentText}},getLocationId(){return""!==this.overrideDestination?this.overrideLocationId:this.locationId},goToParentDirectory(){this.$store.dispatch("goToParentDirectory",{})},shortName:t=>t.length<=50?t:`${t.substring(0,47)}...`,updateCurrentFolder(t){this.$store.commit({type:"updateCurrentFolder",currentFolder:t})},uploadDocument(){const t=document.getElementById("cardInformationModalCloseButton");null!==t&&t.click(),new _.u_(document.getElementById("uploadDocumentModal")).show()}},mounted(){this.$nextTick((()=>{this.getDocumentList(),this.getFolderList()}))}},I=(0,o(3744).Z)(L,[["render",function(t,e,o,_,f,v){const w=(0,i.up)("Icon");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("h2",null,[(0,i.Wm)(w,{icon:t.icons.bxBriefcase},null,8,["icon"]),(0,i.Uk)(" Documents ")]),(0,i._)("p",s," The following is a folder structure of all documents uploaded to this "+(0,n.toDisplayString)(this.getDestination()),1),(0,i.kq)(" DOCUMENT FOLDER TREE "),0===parseInt(t.documentObjectCount)?((0,i.wg)(),(0,i.iD)("div",r,l)):((0,i.wg)(),(0,i.iD)("div",d,[(0,i.kq)(" GO TO PARENT DIRECTORY "),0!==this.currentFolder?((0,i.wg)(),(0,i.iD)("div",{key:0,onClick:e[0]||(e[0]=t=>v.goToParentDirectory()),class:"document--child"},[(0,i.Wm)(w,{icon:t.icons.arrowUp,width:"80px",height:"80px"},null,8,["icon"]),c])):(0,i.kq)("v-if",!0),(0,i.kq)(" RENDER THE FOLDERS "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.folderFilteredList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.pk,onClick:t=>v.updateCurrentFolder(e.pk),class:"document--child"},[(0,i.Wm)(w,{icon:t.icons.folderIcon,width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",u,(0,n.toDisplayString)(v.shortName(e.fields.folder_description)),1)],8,a)))),128)),(0,i.kq)(" RENDER THE FILES "),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.documentFilteredList,(e=>((0,i.wg)(),(0,i.iD)("div",{key:e.document_key_id,class:"document--child"},[(0,i._)("a",{href:`/private/${e.document_key_id}/`,rel:"noopener noreferrer",target:"_blank"},[(0,i.Wm)(w,{icon:v.getIcon(e),width:"80px",height:"80px"},null,8,["icon"]),(0,i._)("p",p,(0,n.toDisplayString)(v.shortName(e.document_key__document_description)),1)],8,m),(0,i.kq)(" REMOVE DOCUMENT "),t.userLevel>=2?((0,i.wg)(),(0,i.iD)("div",g,[(0,i.Wm)(w,{icon:t.icons.trashCan,onClick:t=>v.confirmFileDelete(e.document_key_id)},null,8,["icon","onClick"])])):(0,i.kq)("v-if",!0)])))),128))])),(0,i.kq)(" ADD DOCUMENTS AND FOLDER BUTTON "),h,!1===o.readOnly?((0,i.wg)(),(0,i.iD)("div",D,[t.userLevel>1?((0,i.wg)(),(0,i.iD)("button",y," New Document/File ")):(0,i.kq)("v-if",!0),(0,i._)("ul",k,[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[1]||(e[1]=(...t)=>v.uploadDocument&&v.uploadDocument(...t))}," Upload Document ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[2]||(e[2]=(...t)=>v.addLink&&v.addLink(...t))}," Add Link ")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:e[3]||(e[3]=(...t)=>v.addFolder&&v.addFolder(...t))}," Add Folder ")])])])):(0,i.kq)("v-if",!0)])}]])},2857:(t,e,o)=>{o.d(e,{Z:()=>y});var i=o(6252),n=o(3577);const s={key:0,class:"module-spacer"},r={class:"alert alert-dark"},l={key:1,class:"note-history"},d={class:"note-history--profile"},c=["src"],a={class:"text-instruction"},u={class:"text-instruction"},m={class:"note-history--note"};var p=o(7267),g=o(989),h=o(431);const D={name:"ListNotes",components:{editor:p.Z},mixins:[h.Z],props:{destination:{type:String,default:""},noteHistoryResults:{type:Array,default:()=>[]}},computed:{...(0,g.Se)({contentCss:"getContentCss",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",skin:"getSkin"})},methods:{profilePicture(t){return null!==t&&""!==t?`${this.rootUrl}private/${t}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`}}},y=(0,o(3744).Z)(D,[["render",function(t,e,o,p,g,h){const D=(0,i.up)("editor");return(0,i.wg)(),(0,i.iD)("div",null,[(0,i.kq)(" NOTE HISTORY "),0===o.noteHistoryResults.length?((0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("div",r," Sorry - but there are no notes for this "+(0,n.toDisplayString)(o.destination)+". ",1)])):((0,i.wg)(),(0,i.iD)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.noteHistoryResults,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"note-history--row",key:e.object_note_id},[(0,i._)("div",d,[(0,i._)("img",{src:h.profilePicture(e.profile_picture),alt:"default profile",class:"note-history--profile-picture"},null,8,c),(0,i._)("div",a,(0,n.toDisplayString)(e.first_name)+" "+(0,n.toDisplayString)(e.last_name),1),(0,i._)("div",u,(0,n.toDisplayString)(t.getNiceDate(e.date_modified)),1)]),(0,i._)("div",m,[(0,i.Wm)(D,{init:{height:250,menubar:!1,plugins:["lists","image","codesample","table"],toolbar:[],skin:`${this.skin}`,content_css:`${this.contentCss}`},modelValue:e.object_note,"onUpdate:modelValue":t=>e.object_note=t,disabled:!0},null,8,["init","modelValue","onUpdate:modelValue"])])])))),128))]))])}]])},7939:(t,e,o)=>{o.d(e,{Z:()=>r});var i=o(6252),n=o(3577);const s={name:"ValidationRendering",props:{errorList:{type:Array,default:()=>[]}}},r=(0,o(3744).Z)(s,[["render",function(t,e,o,s,r,l){return(0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(o.errorList,(t=>((0,i.wg)(),(0,i.iD)("span",{class:"error",key:t.$uid},(0,n.toDisplayString)(t.$message),1)))),128)}]])},431:(t,e,o)=>{o.d(e,{Z:()=>n});var i=o(7126);const n={methods:{getNiceDate:t=>""===t||null==t?"":i.ou.fromISO(t).toLocaleString(i.ou.DATETIME_MED),disableDate(t){const e=new Date;return e.setMilliseconds(0),e.setSeconds(0),e.setHours(0),t<=e.getTime()-36e5}}}}}]);