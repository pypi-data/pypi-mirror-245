"use strict";(self.webpackChunknearbeach=self.webpackChunknearbeach||[]).push([[7523],{4231:(t,e,o)=>{o.d(e,{Z:()=>Ft});var s=o(6252),a=o(3577);const r={class:"text-instructions"},i={key:0,class:"alert alert-dark"},d={key:1,class:"group-card-list"},l={class:"group-card--details"},n={key:0,class:"group-card--remove"},c={key:0,class:"group-card"},u=[(0,s._)("div",{class:"group-card--details"},"++ Adding New Group ++",-1)],p=(0,s._)("div",{class:"spacer"},null,-1),m={class:"row submit-row"},g={class:"col-md-12"},h=(0,s._)("hr",null,null,-1),b={class:"text-instructions"},_={key:2,class:"alert alert-dark"},v={key:3,class:"user-card-list"},U=["src"],y={class:"user-card--details"},f={class:"user-card--name"},w={class:"user-card--email"},G={key:0,class:"user-card--remove"},L={key:0,class:"user-card"},D=[(0,s._)("div",{class:"user-card--details"},"++ Adding User(s) ++",-1)],k=(0,s._)("div",{class:"spacer"},null,-1),S={class:"row submit-row"},I={class:"col-md-12"};var j=o(5808),$=o(6542),M=o(3138);const A={class:"modal fade",id:"addGroupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},x={class:"modal-dialog modal-lg"},Z={class:"modal-content"},C={class:"modal-header"},T=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addGroupCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),E={class:"modal-body"},B={key:0,class:"row"},W={class:"col-md-4"},O=(0,s._)("strong",null,"Add Groups",-1),N={class:"text-instructions"},q={class:"text-instructions"},P={class:"col-md-8"},F={key:1,class:"row"},R=(0,s._)("div",{class:"col-md-6"},[(0,s._)("strong",null,"Sorry - no results"),(0,s._)("p",{class:"text-instructions"}," This could be because "),(0,s._)("ul",{class:"text-instructions"},[(0,s._)("li",null,"There are no more groups left to add")])],-1),z={class:"col-md-6 no-search"},H=["src"],K={class:"modal-footer"},Y=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),J=["disabled"];var V=o(2001),Q=o(989);const X={name:"AddGroupWizard",components:{Icon:$.JO,NSelect:V.Z},computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",potentialGroupList:"getPotentialGroupList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl"})},watch:{potentialGroupList(t){void 0!==t&&(this.groupFixList=t.map((t=>({value:t.group_id,label:t.group_name}))))}},mixins:[j.Z],data:()=>({groupFixList:[],groupModel:[]}),methods:{addGroup(){this.$store.commit("updateAddingGroupStatus",{addingGroupStatus:!0});const t=new FormData;this.groupModel.forEach((e=>{t.append("group_list",e)})),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_group/`,t).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list}),this.$store.commit("updateAddingGroupStatus",{addingGroupStatus:!1}),this.groupModel=[],document.getElementById("addGroupCloseButton").click()})).catch((t=>{this.$store.dispatch("newToast",{header:`Error adding group to ${this.destination}`,message:`Sorry, we could not add the group to the ${this.destination}. Error -> ${t}`,extra_classes:"bd-danger",delay:0})}))}}};var tt=o(3744);const et=(0,tt.Z)(X,[["render",function(t,e,o,r,i,d){const l=(0,s.up)("Icon"),n=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",A,[(0,s._)("div",x,[(0,s._)("div",Z,[(0,s._)("div",C,[(0,s._)("h2",null,[(0,s.Wm)(l,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,s.Uk)(" Add Group Wizard ")]),T]),(0,s._)("div",E,[i.groupFixList.length>0?((0,s.wg)(),(0,s.iD)("div",B,[(0,s._)("div",W,[O,(0,s._)("p",N," Use the following multiple select to select which groups you want to add to this "+(0,a.toDisplayString)(t.destination)+". ",1),(0,s._)("p",q," Please note: A user's group has to be added to the "+(0,a.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,s._)("div",P,[(0,s.Wm)(n,{options:i.groupFixList,value:i.groupModel,"onUpdate:value":e[0]||(e[0]=t=>i.groupModel=t),multiple:""},null,8,["options","value"])])])):((0,s.wg)(),(0,s.iD)("div",F,[R,(0,s._)("div",z,[(0,s._)("img",{src:`${t.staticUrl}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,H)])]))]),(0,s._)("div",K,[Y,(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:0==i.groupModel.length,onClick:e[1]||(e[1]=(...t)=>d.addGroup&&d.addGroup(...t))}," Add Group(s) ",8,J)])])])])}]]),ot={class:"modal fade",id:"addUserModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},st={class:"modal-dialog modal-lg"},at={class:"modal-content"},rt={class:"modal-header"},it=(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"addUserCloseButton"},[(0,s._)("span",{"aria-hidden":"true"})],-1),dt={class:"modal-body"},lt={key:0,class:"row"},nt={class:"col-md-4"},ct=(0,s._)("strong",null,"Add Users",-1),ut={class:"text-instructions"},pt={class:"text-instructions"},mt={class:"col-md-8"},gt={key:1,class:"row"},ht={class:"col-md-6"},bt=(0,s._)("strong",null,"Sorry - no results",-1),_t=(0,s._)("p",{class:"text-instructions"}," This could be because ",-1),vt={class:"text-instructions"},Ut=(0,s._)("li",null,"There are no more users left to add",-1),yt={class:"col-md-6 no-search"},ft=["src"],wt={class:"modal-footer"},Gt=(0,s._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," Close ",-1),Lt=["disabled"];var Dt=o(3058);const kt={name:"AddUserWizard",components:{Icon:$.JO,NSelect:V.Z},mixins:[Dt.Z,j.Z],computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",potentialUserList:"getPotentialUserList",rootUrl:"getRootUrl",staticURL:"getStaticUrl",userLevel:"getUserLevel"})},data:()=>({userFixList:[],userModel:[]}),watch:{potentialUserList(t){void 0!==t&&(this.userFixList=t.map((t=>({value:t.id,label:`${t.username}: ${t.first_name} ${t.last_name}`}))))}},methods:{addUser(){this.$store.commit("updateAddingUserStatus",{addingUserStatus:!0});const t=new FormData;this.userModel.forEach((e=>{t.append("user_list",e)})),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/add_user/`,t).then((t=>{document.getElementById("addUserCloseButton").click(),this.userModel=[],this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list}),this.$store.commit("updateAddingUserStatus",{addingUserStatus:!1})})).catch((t=>{this.showErrorModal(t,this.destination)}))}}},St=(0,tt.Z)(kt,[["render",function(t,e,o,r,i,d){const l=(0,s.up)("Icon"),n=(0,s.up)("n-select");return(0,s.wg)(),(0,s.iD)("div",ot,[(0,s._)("div",st,[(0,s._)("div",at,[(0,s._)("div",rt,[(0,s._)("h2",null,[(0,s.Wm)(l,{icon:t.icons.userIcon},null,8,["icon"]),(0,s.Uk)(" Add User Wizard ")]),it]),(0,s._)("div",dt,[i.userFixList.length>0?((0,s.wg)(),(0,s.iD)("div",lt,[(0,s._)("div",nt,[ct,(0,s._)("p",ut," Use the following multiple select to select which users you want to add to this "+(0,a.toDisplayString)(t.destination)+". ",1),(0,s._)("p",pt," Please note: A user's group has to be added to the "+(0,a.toDisplayString)(t.destination)+" before the user can be added. ",1)]),(0,s._)("div",mt,[(0,s.Wm)(n,{options:i.userFixList,value:i.userModel,"onUpdate:value":e[0]||(e[0]=t=>i.userModel=t),multiple:""},null,8,["options","value"])])])):((0,s.wg)(),(0,s.iD)("div",gt,[(0,s._)("div",ht,[bt,_t,(0,s._)("ul",vt,[Ut,(0,s._)("li",null," The user you are after is in a group not current added to this "+(0,a.toDisplayString)(t.destination),1)])]),(0,s._)("div",yt,[(0,s._)("img",{src:`${t.staticURL}NearBeach/images/placeholder/questions.svg`,alt:"Sorry - there are no results"},null,8,ft)])]))]),(0,s._)("div",wt,[Gt,(0,s._)("button",{type:"button",class:"btn btn-primary",disabled:0===i.userModel.length,onClick:e[1]||(e[1]=(...t)=>d.addUser&&d.addUser(...t))}," Add User(s) ",8,Lt)])])])])}]]),It={class:"modal fade",id:"confirmGroupDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmGroupDelete","aria-hidden":"true"},jt={class:"modal-dialog"},$t={class:"modal-content"},Mt=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"confirmGroupDelete"}," Please confirm Group Deletion "),(0,s.kq)(" TASK INFORMATION "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmGroupDeleteButton"})],-1),At=(0,s._)("div",{class:"modal-body"}," Are you sure you want to delete the Group from the object? ",-1),xt={class:"modal-footer"},Zt={name:"ConfirmGroupDelete",props:{groupId:{type:Number,default:0}},computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",objectGroupList:"getObjectGroupList",rootUrl:"getRootUrl"})},methods:{deleteGroup(){this.$store.commit("updateGroupsAndUsers",{objectGroupList:this.objectGroupList.filter((t=>t.group_id!==this.groupId))});const t=new FormData;t.set("group_id",`${this.groupId}`),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_group/`,t).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.$store.dispatch("newToast",{header:"Error removing group from object",message:`We encounted an error moving the group from the object. Error -> ${t}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){document.getElementById("confirmGroupDeleteButton").click()}}},Ct=(0,tt.Z)(Zt,[["render",function(t,e,o,a,r,i){return(0,s.wg)(),(0,s.iD)("div",It,[(0,s._)("div",jt,[(0,s._)("div",$t,[Mt,At,(0,s._)("div",xt,[(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=(...t)=>i.closeModal&&i.closeModal(...t))}," No "),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>i.deleteGroup&&i.deleteGroup(...t))}," Yes ")])])])])}]]),Tt={class:"modal fade",id:"confirmUserDeleteModal",tabindex:"-1","data-bs-backdrop":"static","data-bs-keyboard":"false","aria-labelledby":"confirmUserDelete","aria-hidden":"true"},Et={class:"modal-dialog"},Bt={class:"modal-content"},Wt=(0,s._)("div",{class:"modal-header"},[(0,s._)("h5",{class:"modal-title",id:"confirmUserDelete"}," Please confirm User Deletion "),(0,s.kq)(" TASK INFORMATION "),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"confirmUserDeleteButton"})],-1),Ot=(0,s._)("div",{class:"modal-body"}," Are you sure you want to delete the User from the object? ",-1),Nt={class:"modal-footer"},qt={name:"ConfirmUserDelete",props:{username:{type:String,default:""}},computed:{...(0,Q.Se)({destination:"getDestination",locationId:"getLocationId",objectUserList:"getObjectUserList",rootUrl:"getRootUrl"})},methods:{deleteUser(){this.$store.commit("updateGroupsAndUsers",{objectUserList:this.objectUserList.filter((t=>t.username!==this.username))});const t=new FormData;t.set("username",this.username),this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/remove_user/`,t).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.$store.dispatch("newToast",{header:"Error removing user from object",message:`We encounted an error moving the user from the object. Error -> ${t}`,extra_classes:"bg-danger",delay:0})})),this.closeModal()},closeModal(){document.getElementById("confirmUserDeleteButton").click()}}},Pt={name:"GroupsAndUsersModule",components:{AddGroupWizard:et,AddUserWizard:St,ConfirmGroupDelete:Ct,ConfirmUserDelete:(0,tt.Z)(qt,[["render",function(t,e,o,a,r,i){return(0,s.wg)(),(0,s.iD)("div",Tt,[(0,s._)("div",Et,[(0,s._)("div",Bt,[Wt,Ot,(0,s._)("div",Nt,[(0,s._)("button",{type:"button",class:"btn btn-secondary",onClick:e[0]||(e[0]=(...t)=>i.closeModal&&i.closeModal(...t))}," No "),(0,s._)("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=(...t)=>i.deleteUser&&i.deleteUser(...t))}," Yes ")])])])])}]]),Icon:$.JO},data:()=>({deleteGroupId:0,deleteUsername:"",destinationTitle:""}),computed:{...(0,Q.Se)({addingGroupStatus:"getAddingGroupStatus",addingUserStatus:"getAddingUserStatus",destination:"getDestination",locationId:"getLocationId",objectGroupList:"getObjectGroupList",objectUserList:"getObjectUserList",rootUrl:"getRootUrl",staticUrl:"getStaticUrl",userLevel:"getUserLevel"})},mixins:[j.Z],methods:{addNewGroup(){new M.u_(document.getElementById("addGroupModal")).show()},addNewUser(){new M.u_(document.getElementById("addUserModal")).show()},getGroupAndUserData(){this.axios.post(`${this.rootUrl}object_data/${this.destination}/${this.locationId}/group_and_user_data/`).then((t=>{this.$store.commit("updateGroupsAndUsers",{objectGroupList:t.data.object_group_list,objectUserList:t.data.object_user_list,potentialGroupList:t.data.potential_group_list,potentialUserList:t.data.potential_user_list})})).catch((t=>{this.$store.dispatch("newToast",{header:"Error fetching group and user data",message:`Sorry we could not get any group or user data. Error -> ${t}`,extra_classes:"bd-danger",delay:0})}))},profilePicture(t){return null!==t&&""!==t?`${this.rootUrl}private/${t}/`:`${this.staticUrl}NearBeach/images/placeholder/people_tax.svg`},removeGroup(t){this.deleteGroupId=t,new M.u_(document.getElementById("confirmGroupDeleteModal")).show()},removeUser(t){this.deleteUsername=t,new M.u_(document.getElementById("confirmUserDeleteModal")).show()}},mounted(){this.$nextTick((()=>{if(0===this.locationId)return void setTimeout((()=>{this.getGroupAndUserData()}),100);this.getGroupAndUserData();let t=this.destination;t=t.replaceAll("_"," "),this.destinationTitle=t.replace(/\w\S*/g,(t=>t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()))}))}},Ft=(0,tt.Z)(Pt,[["render",function(t,e,o,j,$,M){const A=(0,s.up)("Icon"),x=(0,s.up)("add-group-wizard"),Z=(0,s.up)("add-user-wizard"),C=(0,s.up)("confirm-group-delete"),T=(0,s.up)("confirm-user-delete");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.kq)(" GROUPS "),(0,s._)("h2",null,[(0,s.Wm)(A,{icon:t.icons.groupPresentation},null,8,["icon"]),(0,s.Uk)(" Groups ")]),(0,s._)("p",r," The following list are all the Groups connected to this "+(0,a.toDisplayString)($.destinationTitle)+". Users will have to be included in these groups to be added to this "+(0,a.toDisplayString)($.destinationTitle),1),0!==t.objectGroupList.length||t.addingGroupStatus?((0,s.wg)(),(0,s.iD)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.objectGroupList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.group_id,class:"group-card"},[(0,s._)("div",l,(0,a.toDisplayString)(e.group_name),1),t.userLevel>=3&&t.objectGroupList.length>1?((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(A,{icon:t.icons.trashCan,onClick:t=>M.removeGroup(e.group_id)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])))),128)),t.addingGroupStatus?((0,s.wg)(),(0,s.iD)("div",c,u)):(0,s.kq)("v-if",!0)])):((0,s.wg)(),(0,s.iD)("div",i," Sorry - there are no groups active. ")),p,(0,s.kq)(" ADD GROUP "),(0,s.kq)(" TO DO - limit it to certain users "),(0,s._)("div",m,[(0,s._)("div",g,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[0]||(e[0]=(...t)=>M.addNewGroup&&M.addNewGroup(...t))},"Add Group to "+(0,a.toDisplayString)($.destinationTitle),1)):(0,s.kq)("v-if",!0)])]),h,(0,s.kq)(" USERS "),(0,s._)("h2",null,[(0,s.Wm)(A,{icon:t.icons.userIcon},null,8,["icon"]),(0,s.Uk)(" Users ")]),(0,s._)("p",b," The following are a list of users who are connected to this "+(0,a.toDisplayString)($.destinationTitle)+". Please note - users have to be a part of the groups list above. ",1),0!==t.objectUserList.length||t.addingUserStatus?((0,s.wg)(),(0,s.iD)("div",v,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.objectUserList,(e=>((0,s.wg)(),(0,s.iD)("div",{key:e.username,class:"user-card"},[(0,s._)("img",{src:M.profilePicture(e.profile_picture),alt:"default profile",class:"user-card--profile"},null,8,U),(0,s._)("div",y,[(0,s._)("div",f,(0,a.toDisplayString)(e.first_name)+" "+(0,a.toDisplayString)(e.last_name),1),(0,s._)("div",w,(0,a.toDisplayString)(e.email),1)]),t.userLevel>=3?((0,s.wg)(),(0,s.iD)("div",G,[(0,s.Wm)(A,{icon:t.icons.trashCan,onClick:t=>M.removeUser(e.username)},null,8,["icon","onClick"])])):(0,s.kq)("v-if",!0)])))),128)),t.addingUserStatus?((0,s.wg)(),(0,s.iD)("div",L,D)):(0,s.kq)("v-if",!0)])):((0,s.wg)(),(0,s.iD)("div",_," Sorry - there are no current users active. ")),k,(0,s.kq)(" TO DO - limit it to certain users "),(0,s._)("div",S,[(0,s._)("div",I,[t.userLevel>1?((0,s.wg)(),(0,s.iD)("a",{key:0,href:"javascript:void(0)",class:"btn btn-primary save-changes",onClick:e[1]||(e[1]=(...t)=>M.addNewUser&&M.addNewUser(...t))},"Add User to "+(0,a.toDisplayString)($.destinationTitle),1)):(0,s.kq)("v-if",!0)])]),(0,s.kq)(" MODALS "),(0,s.Wm)(x),(0,s.Wm)(Z),(0,s.Wm)(C,{"group-id":$.deleteGroupId},null,8,["group-id"]),(0,s.Wm)(T,{username:$.deleteUsername},null,8,["username"])])}]])},3058:(t,e,o)=>{o.d(e,{Z:()=>a});var s=o(3138);const a={methods:{showErrorModal(t,e,o){const a=document.getElementById("loadingModal");if(null===a)return;new s.u_(a).hide();const r=document.getElementById("errorModalContent");if(void 0===r)return;if(r.innerHTML=`<strong>HTML ISSUE:</strong> We could not save the new ${e}-${o}<hr>${t}`,null===document.getElementById("errorModal"))return;const i=new s.u_(i);i.show()},showValidationErrorModal(){document.getElementById("errorModalContent").innerHTML="<strong>FORM ISSUE:</strong> Sorry, but can you please fill out the form completely.",new s.u_(document.getElementById("errorModal")).show()}}}},624:(t,e,o)=>{o.d(e,{Z:()=>a});var s=o(7449);const a={data:()=>({darkTheme:s.$}),methods:{getTheme:t=>"dark"===t?s.$:null}}},5808:(t,e,o)=>{o.d(e,{Z:()=>I});var s=o(3985),a=o(5555),r=o(1826),i=o(6443),d=o(1327),l=o(8521),n=o(1056),c=o(4324),u=o(9672),p=o(9867),m=o(1239),g=o(5004),h=o(1321),b=o(1216),_=o(5550),v=o(7702),U=o(7903),y=o(2606),f=o(3843),w=o(2393),G=o(3360),L=o(9714),D=o(1323),k=o(2610),S=o(5968);const I={data:()=>({icons:{arrowUp:s.Z,bugIcon:a.Z,bxBriefcase:r.Z,cardChecklist:i.Z,clipboardIcon:d.Z,documentPdf:l.Z,documentText:n.Z,folderIcon:c.Z,groupPresentation:u.Z,imageIcon:p.Z,infoCircle:m.Z,linkIcon:g.Z,linkIcon2:h.Z,linkOut:b.Z,mailIcon:_.Z,microsoftExcel:v.Z,microsoftPowerpoint:U.Z,microsoftWord:y.Z,noteAdd:f.Z,objectStorage:w.Z,passwordIcon:G.Z,trashCan:L.Z,userIcon:D.Z,usersIcon:k.Z,xCircle:S.Z}})}}}]);