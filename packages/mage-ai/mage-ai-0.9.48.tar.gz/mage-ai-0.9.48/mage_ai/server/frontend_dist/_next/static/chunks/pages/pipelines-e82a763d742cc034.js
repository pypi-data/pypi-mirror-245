(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},30229:function(e,n,i){"use strict";i.d(n,{PN:function(){return l},TR:function(){return v},U5:function(){return s},Wb:function(){return f},Xm:function(){return u},Z4:function(){return d},fq:function(){return c},gm:function(){return a},kJ:function(){return p}});var t,o,u,r=i(82394),l="__bookmark_values__";!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(u||(u={}));var c,s,d=(t={},(0,r.Z)(t,u.API,(function(){return"API"})),(0,r.Z)(t,u.EVENT,(function(){return"event"})),(0,r.Z)(t,u.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly",e.ALWAYS_ON="@always_on"}(s||(s={}));var a,p,f=[s.ONCE,s.HOURLY,s.DAILY,s.WEEKLY,s.MONTHLY];!function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(a||(a={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(p||(p={}));var v=(o={},(0,r.Z)(o,p.CREATED_AT,"Created at"),(0,r.Z)(o,p.NAME,"Name"),(0,r.Z)(o,p.PIPELINE,"Pipeline"),(0,r.Z)(o,p.STATUS,"Active"),(0,r.Z)(o,p.TYPE,"Type"),o)},31882:function(e,n,i){"use strict";var t=i(38626),o=i(71180),u=i(55485),r=i(30160),l=i(44897),c=i(72473),s=i(70515),d=i(61896),a=i(28598),p=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((s.iI+d.Al)/2,"px;\n    height: ").concat(1.5*s.iI+d.Al,"px;\n    padding: ").concat(s.iI/1.5,"px ").concat(1.25*s.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((s.iI/2+d.Al)/2,"px;\n    height: ").concat(d.Al+s.iI/2+2,"px;\n    padding: ").concat(s.iI/4,"px ").concat(s.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((s.iI/1+d.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,i=e.children,t=e.disabled,l=e.label,d=e.monospace,f=e.onClick,v=e.primary,h=e.small,m=e.xsmall;return(0,a.jsx)(p,{border:n,primary:v,small:h,xsmall:m,children:(0,a.jsx)(o.ZP,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,a.jsxs)(u.ZP,{alignItems:"center",children:[i,l&&(0,a.jsx)(r.ZP,{monospace:d,small:h,xsmall:m,children:l}),!t&&f&&(0,a.jsx)("div",{style:{marginLeft:2}}),!t&&f&&(0,a.jsx)(c.x8,{default:v,muted:!v,size:h?s.iI:1.25*s.iI})]})})})}},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Te}});var t=i(77837),o=i(21831),u=i(75582),r=i(82394),l=i(38860),c=i.n(l),s=i(12691),d=i.n(s),a=i(82684),p=i(69864),f=i(34376),v=i(52749),h=i(60523),m=i(71180),g=i(90299),b=i(31882),x=i(94629),Z=i(97618),j=i(55485),_=i(85854),C=i(93369),w=i(65956),I=i(38276),k=i(30160),y=i(35576),P=i(17488),T=i(28598);var A=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,o=e.minWidth,u=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,s=e.title,d=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(d),v=f[0],h=f[1],g=c?y.Z:P.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,T.jsxs)(w.Z,{maxWidth:t,minWidth:o,children:[(0,T.jsx)(k.ZP,{bold:!0,children:s}),(0,T.jsx)(I.Z,{mt:1,children:(0,T.jsx)(g,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,T.jsx)(I.Z,{mt:2,children:(0,T.jsx)(k.ZP,{muted:!0,small:!0,children:n})}),(0,T.jsx)(I.Z,{mt:3,children:(0,T.jsxs)(j.ZP,{children:[(0,T.jsx)(C.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===d||u&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,T.jsx)(I.Z,{ml:1}),(0,T.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},E=i(48670),S=i(57653),O=i(55729),M=i(93808),D=i(82359),N=i(4190),R=i(75499),L=i(48381),U=i(69650),G=i(85544),Y=i(35686),B=i(44897),H=i(42631),V=i(44425),W=i(72473),$=i(23780),z=i(8666),q=i(46684),K=i(53808),Q="pipeline_list_filters",X="pipeline_list_group_bys",F="pipeline_list_sort_column_index",J="pipeline_list_sort_direction",ee="pipeline_list_selected_tab_uuid";function ne(e){return(0,K.t8)(Q,e),e}function ie(e){return(0,K.t8)(X,e),e}var te=i(32929),oe=i(44898),ue=i(70515),re=i(30229),le=i(81655),ce=i(31608),se=i(81728),de=i(3917),ae=i(72619),pe=i(69419),fe=i(65458),ve=i(15610),he=i(86735),me=i(42122),ge=i(3314),be=i(70320),xe=i(89538),Ze=i(44952);function je(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function _e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?je(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):je(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Ce={Icon:W.Pf,label:function(){return"Recently viewed"},uuid:"recent"},we={Icon:W.vd,label:function(){return"All pipelines"},uuid:"all"},Ie=[we,Ce],ke="tab",ye={borderRadius:"".concat(H.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function Pe(){var e,n=(0,f.useRouter)(),i=(0,a.useRef)(null),t=(0,a.useRef)(null),l=(0,a.useState)(null),c=l[0],s=l[1],C=(0,a.useState)(null),y=C[0],P=C[1],M=(0,a.useState)(null),H=M[0],je=M[1],Pe=(0,a.useState)(null),Te=Pe[0],Ae=Pe[1],Ee=(0,a.useState)(null),Se=Ee[0],Oe=Ee[1],Me=(0,a.useState)({}),De=Me[0],Ne=Me[1],Re=(0,a.useState)(null),Le=Re[0],Ue=Re[1],Ge=(0,pe.iV)(),Ye=(0,pe.DQ)(Ge,[S.$1.STATUS,S.$1.TAG,S.$1.TYPE]);(0,a.useEffect)((function(){var e;s(null===i||void 0===i||null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Ge,i]);var Be=Y.ZP.projects.list(),He=Be.data,Ve=Be.mutate,We=(0,a.useMemo)((function(){var e;return null===He||void 0===He||null===(e=He.projects)||void 0===e?void 0:e[0]}),[He]),$e=(0,a.useMemo)((function(){var e;return(0,be.hY)(null===We||void 0===We||null===(e=We.features)||void 0===e?void 0:e[D.d.LOCAL_TIMEZONE])}),[null===We||void 0===We?void 0:We.features]),ze=(0,a.useMemo)((function(){var e;return null===We||void 0===We||null===(e=We.features)||void 0===e?void 0:e[D.d.OPERATION_HISTORY]}),[We]),qe=(0,a.useMemo)((function(){return $e?le.O$:{}}),[$e]),Ke=Y.ZP.pipelines.list(_e(_e({},Ye),{},{include_schedules:1})),Qe=Ke.data,Xe=Ke.mutate,Fe=(0,a.useMemo)((function(){return(null===Ge||void 0===Ge?void 0:Ge[S.$1.HISTORY_DAYS])||7}),[Ge]),Je=Y.ZP.pipelines.list(_e(_e({},Ye),{},(e={},(0,r.Z)(e,S.$1.HISTORY_DAYS,(0,se.HW)(Fe)?Number(Fe):Fe),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!ze}),en=Je.data,nn=Je.mutate,tn=(0,a.useCallback)((function(e){var n=e||[];if(Se){var i=Se.toLowerCase();n=n.filter((function(e){var n=e.name,t=e.description,o=e.uuid;return(null===n||void 0===n?void 0:n.toLowerCase().includes(i))||(null===o||void 0===o?void 0:o.toLowerCase().includes(i))||(null===t||void 0===t?void 0:t.toLowerCase().includes(i))}))}return n}),[Se]),on=(0,a.useMemo)((function(){var e=tn((null===Qe||void 0===Qe?void 0:Qe.pipelines)||[]);if(null!==Ge&&void 0!==Ge&&Ge[S.$1.TAG]){var n=Ge[S.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(S.$1.NO_TAGS)}))}return e}),[Qe,tn,Ge]),un=(0,a.useMemo)((function(){return tn((null===en||void 0===en?void 0:en.pipelines)||[])}),[en,tn]),rn=(0,a.useMemo)((function(){return(0,he.HK)(on,(function(e){return e.uuid}))}),[on]),ln=(0,a.useMemo)((function(){return(0,he.HK)(un,(function(e){return e.uuid}))}),[un]),cn=(0,a.useCallback)((function(e){var n,i,t,o;return null===e||void 0===e||null===(n=e[2])||void 0===n||null===(i=n.props)||void 0===i||null===(t=i.children)||void 0===t||null===(o=t.props)||void 0===o?void 0:o.children}),[]),sn=(0,a.useMemo)((function(){return(null===H||void 0===H?void 0:H.length)>0?null===H||void 0===H?void 0:H.map((function(e){var n=cn(e);return null===rn||void 0===rn?void 0:rn[n]})):on}),[cn,H,on,rn]),dn=(0,a.useMemo)((function(){return(null===Te||void 0===Te?void 0:Te.length)>0?null===Te||void 0===Te?void 0:Te.map((function(e){var n=cn(e);return null===ln||void 0===ln?void 0:ln[n]})):un}),[cn,Te,un,ln]),an=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),pn=null===Ge||void 0===Ge?void 0:Ge[le.lG.SORT_COL_IDX],fn=null===Ge||void 0===Ge?void 0:Ge[le.lG.SORT_DIRECTION],vn=(0,a.useMemo)((function(){return pn?{columnIndex:+pn,sortDirection:fn||le.sh.ASC}:void 0}),[pn,fn]),hn=null===Ge||void 0===Ge?void 0:Ge[S.$1.GROUP],mn=(0,a.useMemo)((function(){return null===Ge||void 0===Ge?void 0:Ge.tab}),[Ge]),gn=(0,p.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,t=void 0!==i&&i;return Y.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:t}})}),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){var n=e.data.download.token;(0,Ze.K)(n)},onErrorCallback:function(e,n){return Ue({errors:n,response:e})}})}}),bn=(0,u.Z)(gn,1)[0];(0,a.useEffect)((function(){var e,n={};if(pn&&an.includes(+pn))(0,K.t8)(F,pn),fn&&(0,K.t8)(J,fn);else{var i=(0,K.U2)(F,null),t=(0,K.U2)(J,le.sh.ASC);null!==i&&(n[le.lG.SORT_COL_IDX]=i,n[le.lG.SORT_DIRECTION]=t)}ze&&(mn?(0,K.t8)(ee,mn):n.tab=(0,K.U2)(ee,null===Ie||void 0===Ie||null===(e=Ie[0])||void 0===e?void 0:e.uuid));if(hn)ie((0,r.Z)({},hn,!0));else{var o,l=(0,K.U2)(X,{});l&&Object.entries(l).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];!o&&t&&(o=i)})),o&&(n[S.$1.GROUP]=o)}if((0,me.Qr)(Ye)){var c={},s=(0,K.U2)(Q,{});s&&Object.entries(s).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];c[i]=[],Object.entries(t).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1]&&c[i].push(t)}))})),(0,me.Qr)(c)||(n=_e(_e({},n),c))}else{var d={};Object.entries(Ye).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];d[i]={};var o,r=t;(Array.isArray(r)||(r=[r]),r&&Array.isArray(r))&&(null===(o=r)||void 0===o||o.forEach((function(e){d[i][e]=!0})))})),ne(d)}(0,me.Qr)(n)||(0,ve.u7)(n,{pushHistory:!1})}),[hn,ze,Ye,mn,an,pn,fn]),(0,a.useEffect)((function(){(0,ae.bB)(Qe,Ue)}),[Qe]);var xn=function(e){return(0,p.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,ae.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return Ue({errors:n,response:e})}})}})},Zn=xn((function(e){return n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),jn=(0,u.Z)(Zn,2),_n=jn[0],Cn=jn[1].isLoading,wn=xn((function(){null===Xe||void 0===Xe||Xe(),null===nn||void 0===nn||nn()})),In=(0,u.Z)(wn,2),kn=In[0],yn=In[1].isLoading,Pn=(0,p.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(e){var n=e.pipeline.uuid;Ne((function(e){return _e(_e({},e),{},(0,r.Z)({},n,!1))})),Xe(),null===nn||void 0===nn||nn(),null===Un||void 0===Un||Un(),P(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;Ne((function(e){return _e(_e({},e),{},(0,r.Z)({},t,!1))})),Ue({errors:n,response:e})}})}}),Tn=(0,u.Z)(Pn,2),An=Tn[0],En=Tn[1].isLoading,Sn=(0,p.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){null===Xe||void 0===Xe||Xe(),null===nn||void 0===nn||nn()},onErrorCallback:function(e,n){return Ue({errors:n,response:e})}})}}),On=(0,u.Z)(Sn,2),Mn=On[0],Dn=On[1].isLoading,Nn=(0,xe.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,T.jsx)(A,{isLoading:En,minWidth:55*ue.iI,noEmptyValue:!!t,onClose:Un,onSave:function(e){var i=n||y;if(i){var o=i.uuid,u={uuid:o};t?u.name=e:u.description=e,Ne((function(e){return _e(_e({},e),{},(0,r.Z)({},o,!0))})),An(u)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[En,y],{background:!0,uuid:"rename_pipeline_and_save"}),Rn=(0,u.Z)(Nn,2),Ln=Rn[0],Un=Rn[1],Gn=(0,xe.dd)((function(){return(0,T.jsx)($.BC,{children:(0,T.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){_n({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,se.Y6)()}}).then((function(){Hn()}))},showBreadcrumbs:!0,tabs:[te.A2]})})}),{},[_n],{background:!0,uuid:"browse_templates"}),Yn=(0,u.Z)(Gn,2),Bn=Yn[0],Hn=Yn[1],Vn=(0,xe.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,T.jsx)($.BC,{children:(0,T.jsx)(O.Z,{cancelButtonText:n,contained:!0,header:(0,T.jsx)(I.Z,{mb:ue.HN,children:(0,T.jsxs)(w.Z,{children:[(0,T.jsx)(k.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,T.jsx)(I.Z,{mt:1,children:(0,T.jsxs)(k.ZP,{warning:!0,children:["Read ",(0,T.jsx)(E.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),zn()},onSaveSuccess:function(e){Ve(),zn(),null===t||void 0===t||t(e)}})})}),{},[Ve],{background:!0,uuid:"configure_project"}),Wn=(0,u.Z)(Vn,2),$n=Wn[0],zn=Wn[1],qn=(0,xe.dd)((function(){return(0,T.jsx)($.BC,{children:(0,T.jsx)(v.Z,{createPipeline:_n,isLoading:Cn,onClose:Xn})})}),{},[_n,Cn],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),Kn=(0,u.Z)(qn,2),Qn=Kn[0],Xn=Kn[1],Fn=(0,a.useMemo)((function(){return(0,fe.d)(_n,{showAIModal:function(){null!==We&&void 0!==We&&We.openai_api_key?Qn():$n({onSaveSuccess:function(){Qn()}})},showBrowseTemplates:Bn})}),[_n,We,Qn,Bn,$n]),Jn=Y.ZP.tags.list().data,ei=(0,a.useMemo)((function(){return(0,he.YC)((null===Jn||void 0===Jn?void 0:Jn.tags)||[],(function(e){return e.uuid}))}),[Jn]),ni=(0,a.useMemo)((function(){return(0,T.jsx)(G.Z,{addButtonProps:{isLoading:Cn,label:"New",menuItems:Fn},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:Dn,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"))&&Mn(null===y||void 0===y?void 0:y.uuid)}},extraActionButtonProps:{Icon:W.oX,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===y||void 0===y?void 0:y.uuid,"?"),isLoading:yn,onClick:function(){return kn({pipeline:{clone_pipeline_uuid:null===y||void 0===y?void 0:y.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:S.kA,tag:[S.$1.NO_TAGS].concat((0,o.Z)(ei.map((function(e){return e.uuid})))),type:Object.values(S.qL)},filterValueLabelMapping:{status:S.kA.reduce((function(e,n){return _e(_e({},e),{},(0,r.Z)({},n,(0,se.J3)((0,se.kC)(n))))}),{}),tag:_e((0,r.Z)({},S.$1.NO_TAGS,"No tags"),ei.reduce((function(e,n){var i=n.uuid;return _e(_e({},e),{},(0,r.Z)({},i,i))}),{})),type:S.G7},groupButtonProps:{groupByLabel:hn,menuItems:[{beforeIcon:hn===S.r0.STATUS?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.STATUS)},onClick:function(){var e=hn===S.r0.STATUS?null:S.r0.STATUS;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:hn===S.r0.TAG?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.TAG)},onClick:function(){var e=hn===S.r0.TAG?null:S.r0.TAG;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:hn===S.r0.TYPE?(0,T.jsx)(W.Jr,{fill:B.Z.content.default,size:1.5*ue.iI}):(0,T.jsx)(W.Cd,{muted:!0,size:1.5*ue.iI}),label:function(){return(0,se.kC)(S.r0.TYPE)},onClick:function(){var e=hn===S.r0.TYPE?null:S.r0.TYPE;e||ie({}),(0,ve.u7)((0,r.Z)({},S.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Ln({pipelineName:null===y||void 0===y?void 0:y.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Ln({pipeline:y,pipelineDescription:null===y||void 0===y?void 0:y.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){ne({}),n.push("/pipelines")},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&ne({})},query:Ye,searchProps:{onChange:Oe,value:Se},selectedRowId:null===y||void 0===y?void 0:y.uuid,setSelectedRow:P})}),[kn,Mn,hn,yn,Cn,Dn,Fn,Ye,n,Se,y,Ln,ei]),ii=(0,$.VI)(null,{},[],{uuid:"pipelines/list"}),ti=(0,u.Z)(ii,1)[0],oi=(0,p.Db)(Y.ZP.projects.useUpdate(null===We||void 0===We?void 0:We.name),{onSuccess:function(e){return(0,ae.wD)(e,{callback:function(){Ve()},onErrorCallback:function(e,n){return ti({errors:n,response:e})}})}}),ui=(0,u.Z)(oi,2),ri=ui[0],li=ui[1].isLoading,ci=(0,a.useCallback)((function(e){return ri({project:e})}),[ri]),si=(0,xe.dd)((function(){return(0,T.jsxs)(w.Z,{maxWidth:60*ue.iI,children:[(0,T.jsx)(I.Z,{mb:1,children:(0,T.jsx)(_.Z,{children:"Help improve Mage"})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsx)(k.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsx)(w.Z,{success:!0,children:(0,T.jsxs)(j.ZP,{alignItems:"center",children:[(0,T.jsx)(W.Yo,{size:5*ue.iI,success:!0}),(0,T.jsx)(I.Z,{mr:1}),(0,T.jsx)(Z.Z,{children:(0,T.jsx)(k.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsxs)(k.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,T.jsx)(E.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,T.jsx)(E.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsx)(k.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsx)(k.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,T.jsx)(I.Z,{mr:ue.cd}),(0,T.jsx)(U.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&ci({help_improve_mage:!1}).then((function(){return pi()}))}})]})}),li&&(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsx)(N.Z,{inverted:!0})}),(0,T.jsx)(I.Z,{mb:ue.cd,children:(0,T.jsxs)(k.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,T.jsx)(E.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,T.jsx)(m.ZP,{onClick:function(){return ci({help_improve_mage:!0}).then((function(){return pi()}))},secondary:!0,children:"Close"})]})}),{},[We],{background:!0,hideCallback:function(){ci({help_improve_mage:!0})},uuid:"help_mage"}),di=(0,u.Z)(si,2),ai=di[0],pi=di[1];(0,a.useEffect)((function(){We&&null===(null===We||void 0===We?void 0:We.help_improve_mage)&&ai()}),[We,ai]);var fi=(0,a.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[hn];if(S.r0.STATUS===hn){var o=(e||{}).schedules,u=void 0===o?[]:o,r=u.length;t=u.find((function(e){var n=e.status;return re.fq.ACTIVE===n}))?S.QK.ACTIVE:r>=1?S.QK.INACTIVE:S.QK.NO_SCHEDULES}else if(S.r0.TAG===hn){t=(null===e||void 0===e?void 0:e.tags)?(0,he.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];S.r0.STATUS===hn?Object.values(S.QK).forEach((function(e){i.push(n[e]),t.push((0,se.vg)(e))})):S.r0.TAG===hn?(0,he.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,T.jsx)(b.Z,{small:!0,children:(0,T.jsx)(k.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):S.r0.TYPE===hn&&Object.values(S.qL).forEach((function(e){i.push(n[e]),t.push(S.G7[e])}));var o=[],u=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(u.push(e),o.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:o,rowsGroupedByIndex:u}}),[hn]),vi=(0,a.useMemo)((function(){return fi(sn)}),[fi,sn]),hi=vi.rowGroupHeaders,mi=vi.rowsGroupedByIndex,gi=(0,a.useMemo)((function(){return fi(dn)}),[fi,dn]),bi=gi.rowGroupHeaders,xi=gi.rowsGroupedByIndex,Zi=(0,a.useCallback)((function(e,i,o,u,l){return(0,T.jsx)(R.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,se.kC)(S.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,se.kC)(S.r0.TYPE)},_e(_e({},qe),{},{uuid:"Updated at"}),_e(_e({},qe),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],defaultSortColumnIndex:2,getUniqueRowIdentifier:cn,isSelectedRow:function(e){var n;return(null===(n=i[e])||void 0===n?void 0:n.uuid)===(null===y||void 0===y?void 0:y.uuid)},localStorageKeySortColIdx:F,localStorageKeySortDirection:J,onClickRow:function(e){return P((function(n){var t=i[e];return(null===n||void 0===n?void 0:n.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(e){n.push("/pipelines/[pipeline]/edit","/pipelines/".concat(i[e].uuid,"/edit"))},ref:t,renderRightClickMenuItems:function(e){var t=i[e];return[{label:function(){return"Edit description"},onClick:function(){return Ln({pipeline:t,pipelineDescription:null===t||void 0===t?void 0:t.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Ln({pipeline:t,pipelineName:null===t||void 0===t?void 0:t.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return kn({pipeline:{clone_pipeline_uuid:null===t||void 0===t?void 0:t.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){bn({pipelineUUID:null===t||void 0===t?void 0:t.uuid,filesOnly:!1})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){bn({pipelineUUID:null===t||void 0===t?void 0:t.uuid,filesOnly:!0})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){n.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===t||void 0===t?void 0:t.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){n.push("/templates?object_type=".concat(oe.R,"&new=1&pipeline_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){n.push("/global-data-products?object_type=".concat(z.b.PIPELINE,"&new=1&object_uuid=").concat(null===t||void 0===t?void 0:t.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===t||void 0===t?void 0:t.uuid,"?"))&&Mn(null===t||void 0===t?void 0:t.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*ue.iI,rowGroupHeaders:o,rows:null===e||void 0===e?void 0:e.map((function(e,i){var t=e.blocks,o=e.created_at,u=e.description,l=e.schedules,c=e.tags,s=e.type,a=e.updated_at,p=e.uuid,f=t.filter((function(e){var n=e.type;return V.tf.SCRATCHPAD!==n})).length,v=l.length,h=l.find((function(e){var n=e.status;return re.fq.ACTIVE===n})),g=(0,T.jsx)("div",{children:(0,T.jsx)(L.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(i));return[v>=1||De[p]?(0,T.jsx)(m.ZP,{iconOnly:!0,loading:!!De[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,ge.j)(n),Ne((function(e){return _e(_e({},e),{},(0,r.Z)({},p,!0))})),An(_e(_e({},e),{},{status:h?re.fq.INACTIVE:re.fq.ACTIVE}))},children:h?(0,T.jsx)(W.dz,{muted:!0,size:2*ue.iI}):(0,T.jsx)(W.Py,{default:!0,size:2*ue.iI})}):null,(0,T.jsx)(k.ZP,{default:!h,monospace:!0,success:!!h,children:h?re.fq.ACTIVE:v>=1?re.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(i)),(0,T.jsx)(d(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,T.jsx)(E.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(i)),(0,T.jsx)(k.ZP,{default:!0,preWrap:!0,title:u,children:u},"pipeline_description_".concat(i)),(0,T.jsx)(k.ZP,{children:S.G7[s]},"pipeline_type_".concat(i)),(0,T.jsx)(k.ZP,{monospace:!0,small:!0,title:a?(0,de._6)(a):null,children:a?(0,de.XG)(a,$e):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(i)),(0,T.jsx)(k.ZP,{monospace:!0,small:!0,title:o?(0,de._6)(o):null,children:o?(0,de.XG)(o.slice(0,19),$e):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(i)),g,(0,T.jsx)(k.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(i)),(0,T.jsx)(k.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(i)),(0,T.jsxs)(Z.Z,{flex:1,justifyContent:"flex-end",children:[(0,T.jsx)(m.ZP,_e(_e({},ye),{},{onClick:function(){bn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,T.jsx)(W.vc,{default:!0,size:2*ue.iI})})),(0,T.jsx)(I.Z,{mr:1}),(0,T.jsx)(m.ZP,_e(_e({},ye),{},{onClick:function(){n.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,T.jsx)(W.UY,{default:!0,size:2*ue.iI})})),(0,T.jsx)(I.Z,{mr:1}),(0,T.jsx)(m.ZP,_e(_e({},ye),{},{onClick:function(){n.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,T.jsx)(W.$B,{default:!0,size:2*ue.iI})}))]},"chevron_icon_".concat(i))]})),rowsGroupedByIndex:u,setRowsSorted:l,sortableColumnIndexes:an,sortedColumn:vn,stickyHeader:!0})}),[kn,Mn,bn,$e,cn,De,n,y,Ne,P,Ln,an,vn,qe,An]),ji=(0,a.useMemo)((function(){return Zi(on,sn,hi,mi,je)}),[on,sn,Zi,hi,mi,je]),_i=(0,a.useMemo)((function(){return Zi(un,dn,bi,xi,Ae)}),[un,dn,Zi,bi,xi,Ae]),Ci=(0,a.useMemo)((function(){return(null===on||void 0===on?void 0:on.length)||0}),[on]),wi=(0,a.useMemo)((function(){return(null===un||void 0===un?void 0:un.length)||0}),[un]),Ii=(0,a.useMemo)((function(){return(!ze||we.uuid===mn)&&!Ci||ze&&Ce.uuid===mn&&!wi}),[ze,Ci,wi,mn]);return(0,T.jsxs)(x.Z,{errors:Le,setErrors:Ue,subheaderChildren:ni,title:"Pipelines",uuid:"pipelines/index",children:[ze&&(0,T.jsx)(I.Z,{pb:hn?0:ue.cd,pt:ue.cd,px:ue.cd,ref:i,children:(0,T.jsx)(g.Z,{noPadding:!0,onClickTab:function(e){var n=e.uuid;return(0,ve.u7)((0,r.Z)({},ke,n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:mn,tabs:Ie})}),Ii?(0,T.jsx)(I.Z,{p:ue.Mq,children:Qe?(0,T.jsx)(k.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,T.jsx)(N.Z,{inverted:!0,large:!0})}):null,(0,T.jsxs)(ce.cl,{hide:Ii,includePadding:!!hn,maxHeight:"calc(100vh - ".concat(q.Mz+74+(c||0),"px)"),children:[(!ze||we.uuid===mn)&&ji,ze&&Ce.uuid===mn&&_i]})]})}Pe.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Te=(0,M.Z)(Pe)},44952:function(e,n,i){"use strict";i.d(n,{K:function(){return o}});var t=i(4383);function o(e){var n=(0,t.ZP)("downloads",e),i=document.createElement("a");i.href=n,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)}},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])}},function(e){e.O(0,[2678,1154,844,5820,6639,1124,341,1751,1821,4267,6990,8487,8264,7858,5499,4366,4138,5810,1769,1550,90,9264,5544,1952,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);