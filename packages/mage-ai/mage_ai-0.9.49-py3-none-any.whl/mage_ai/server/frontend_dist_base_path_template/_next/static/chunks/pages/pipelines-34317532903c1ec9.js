(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1221],{8666:function(e,n,i){"use strict";var t;i.d(n,{b:function(){return t}}),function(e){e.BLOCK="block",e.PIPELINE="pipeline"}(t||(t={}))},30229:function(e,n,i){"use strict";i.d(n,{PN:function(){return l},TR:function(){return v},U5:function(){return d},Wb:function(){return f},Xm:function(){return o},Z4:function(){return s},fq:function(){return c},gm:function(){return a},kJ:function(){return p}});var t,u,o,r=i(82394),l="__bookmark_values__";!function(e){e.API="api",e.EVENT="event",e.TIME="time"}(o||(o={}));var c,d,s=(t={},(0,r.Z)(t,o.API,(function(){return"API"})),(0,r.Z)(t,o.EVENT,(function(){return"event"})),(0,r.Z)(t,o.TIME,(function(){return"schedule"})),t);!function(e){e.ACTIVE="active",e.INACTIVE="inactive"}(c||(c={})),function(e){e.ONCE="@once",e.HOURLY="@hourly",e.DAILY="@daily",e.WEEKLY="@weekly",e.MONTHLY="@monthly",e.ALWAYS_ON="@always_on"}(d||(d={}));var a,p,f=[d.ONCE,d.HOURLY,d.DAILY,d.WEEKLY,d.MONTHLY];!function(e){e.INTERVAL="frequency[]",e.STATUS="status[]",e.TAG="tag[]",e.TYPE="type[]"}(a||(a={})),function(e){e.CREATED_AT="created_at",e.NAME="name",e.PIPELINE="pipeline_uuid",e.STATUS="status",e.TYPE="schedule_type"}(p||(p={}));var v=(u={},(0,r.Z)(u,p.CREATED_AT,"Created at"),(0,r.Z)(u,p.NAME,"Name"),(0,r.Z)(u,p.PIPELINE,"Pipeline"),(0,r.Z)(u,p.STATUS,"Active"),(0,r.Z)(u,p.TYPE,"Type"),u)},31882:function(e,n,i){"use strict";var t=i(38626),u=i(71180),o=i(55485),r=i(30160),l=i(44897),c=i(72473),d=i(70515),s=i(61896),a=i(28598),p=t.default.div.withConfig({displayName:"Chip__ChipStyle",componentId:"sc-1ok73g-0"})(["display:inline-block;"," "," "," "," "," ",""],(function(e){return!e.primary&&"\n    background-color: ".concat((e.theme.background||l.Z.background).tag,";\n  ")}),(function(e){return e.primary&&"\n    background-color: ".concat((e.theme.chart||l.Z.chart).primary,";\n  ")}),(function(e){return!e.small&&"\n    border-radius: ".concat((d.iI+s.Al)/2,"px;\n    height: ").concat(1.5*d.iI+s.Al,"px;\n    padding: ").concat(d.iI/1.5,"px ").concat(1.25*d.iI,"px;\n  ")}),(function(e){return e.small&&"\n    border-radius: ".concat((d.iI/2+s.Al)/2,"px;\n    height: ").concat(s.Al+d.iI/2+2,"px;\n    padding: ").concat(d.iI/4,"px ").concat(d.iI,"px;\n  ")}),(function(e){return e.xsmall&&"\n    border-radius: ".concat((d.iI/1+s.Al)/1,"px;\n    height: ").concat(20,"px;\n    padding: 4px 6px;\n  ")}),(function(e){return e.border&&"\n    border: 1px solid ".concat((e.theme.content||l.Z.content).muted,";\n  ")}));n.Z=function(e){var n=e.border,i=e.children,t=e.disabled,l=e.label,s=e.monospace,f=e.onClick,v=e.primary,h=e.small,m=e.xsmall;return(0,a.jsx)(p,{border:n,primary:v,small:h,xsmall:m,children:(0,a.jsx)(u.ZP,{basic:!0,disabled:t,noBackground:!0,noPadding:!0,onClick:f,transparent:!0,children:(0,a.jsxs)(o.ZP,{alignItems:"center",children:[i,l&&(0,a.jsx)(r.ZP,{monospace:s,small:h,xsmall:m,children:l}),!t&&f&&(0,a.jsx)("div",{style:{marginLeft:2}}),!t&&f&&(0,a.jsx)(c.x8,{default:v,muted:!v,size:h?d.iI:1.25*d.iI})]})})})}},55620:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return Oe}});var t=i(77837),u=i(75582),o=i(21831),r=i(82394),l=i(38860),c=i.n(l),d=i(12691),s=i.n(d),a=i(82684),p=i(69864),f=i(34376),v=i(52749),h=i(60523),m=i(71180),g=i(90299),b=i(31882),x=i(94629),Z=i(97618),j=i(55485),C=i(85854),_=i(93369),I=i(65956),w=i(38276),P=i(30160),k=i(35576),y=i(17488),T=i(28598);var E=function(e){var n=e.description,i=e.isLoading,t=e.maxWidth,u=e.minWidth,o=e.noEmptyValue,r=e.onClose,l=e.onSave,c=e.textArea,d=e.title,s=e.value,p=(0,a.useRef)(null),f=(0,a.useState)(s),v=f[0],h=f[1],g=c?k.Z:y.Z;return(0,a.useEffect)((function(){var e;null===p||void 0===p||null===(e=p.current)||void 0===e||e.focus()}),[]),(0,T.jsxs)(I.Z,{maxWidth:t,minWidth:u,children:[(0,T.jsx)(P.ZP,{bold:!0,children:d}),(0,T.jsx)(w.Z,{mt:1,children:(0,T.jsx)(g,{monospace:!0,onChange:function(e){return h(e.target.value)},ref:p,rows:c?7:null,value:v})}),n&&(0,T.jsx)(w.Z,{mt:2,children:(0,T.jsx)(P.ZP,{muted:!0,small:!0,children:n})}),(0,T.jsx)(w.Z,{mt:3,children:(0,T.jsxs)(j.ZP,{children:[(0,T.jsx)(_.ZP,{bold:!0,inline:!0,loading:i,onClick:function(){v===s||o&&!v?r():l(v)},outline:!0,primary:!0,uuid:"Inputs/InputModal/SaveInput",children:"Save"}),(0,T.jsx)(w.Z,{ml:1}),(0,T.jsx)(m.ZP,{onClick:r,children:"Cancel"})]})})]})},A=i(48670),S=i(55072),O=i(57653),M=i(55729),D=i(93808),R=i(82359),N=i(44085),L=i(4190),U=i(75499),G=i(48381),H=i(69650),B=i(85544),Y=i(35686),$=i(44897),V=i(42631),W=i(44425),z=i(72473),F=i(23780),q=i(8666),K=i(46684),Q=i(53808),X="pipeline_list_filters",J="pipeline_list_group_bys",ee="pipeline_list_sort_column_index",ne="pipeline_list_sort_direction",ie="pipeline_list_selected_tab_uuid";function te(e){return(0,Q.t8)(X,e),e}function ue(e){return(0,Q.t8)(J,e),e}var oe=i(11498),re=i(32929),le=i(44898),ce=i(70515),de=i(30229),se=i(81655),ae=i(31608),pe=i(81728),fe=i(3917),ve=i(72619),he=i(69419),me=i(65458),ge=i(15610),be=i(86735),xe=i(42122),Ze=i(3314),je=i(70320),Ce=i(89538),_e=i(44952);function Ie(e,n){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),i.push.apply(i,t)}return i}function we(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?Ie(Object(i),!0).forEach((function(n){(0,r.Z)(e,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ie(Object(i)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(i,n))}))}return e}var Pe={Icon:z.Pf,label:function(){return"Recently viewed"},uuid:"recent"},ke={Icon:z.vd,label:function(e){return null!==e&&void 0!==e&&e.count?"All pipelines \u203a ".concat((null===e||void 0===e?void 0:e.count)||0):"All pipelines"},uuid:"all"},ye=[ke,Pe],Te="tab",Ee=[O.$1.SEARCH],Ae={borderRadius:"".concat(V.BG,"px"),iconOnly:!0,noBackground:!0,noBorder:!0,outline:!0,padding:"4px"};function Se(){var e,n,i,t,l=(0,f.useRouter)(),c=(0,a.useRef)(null),d=(0,a.useRef)(null),_=(0,a.useRef)(null),k=(0,a.useRef)(null),y=(0,a.useState)(null),D=y[0],V=y[1],Ie=(0,a.useState)(null),Se=Ie[0],Oe=Ie[1],Me=(0,a.useState)(null),De=Me[0],Re=Me[1],Ne=(0,a.useState)(null),Le=Ne[0],Ue=Ne[1],Ge=(0,a.useState)(null),He=Ge[0],Be=Ge[1],Ye=(0,a.useCallback)((function(e){Be(e),clearTimeout(k.current),k.current=setTimeout((function(){return(0,ge.u7)((0,r.Z)({},O.$1.SEARCH,e))}),500)}),[Be]),$e=(0,a.useState)({}),Ve=$e[0],We=$e[1],ze=(0,a.useState)(null),Fe=ze[0],qe=ze[1],Ke=(0,he.iV)(),Qe=we((0,r.Z)({},oe.$D.LIMIT,S.Q),(0,he.DQ)(Ke,[O.$1.SEARCH,O.$1.STATUS,O.$1.TAG,O.$1.TYPE].concat((0,o.Z)(oe.RG)))),Xe=(0,a.useMemo)((function(){return null===Ke||void 0===Ke?void 0:Ke.tab}),[Ke]);(0,a.useEffect)((function(){var e;V(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.getBoundingClientRect().height)}),[Ke,c]);var Je=Y.ZP.projects.list(),en=Je.data,nn=Je.mutate,tn=(0,a.useMemo)((function(){var e;return null===en||void 0===en||null===(e=en.projects)||void 0===e?void 0:e[0]}),[en]),un=(0,a.useMemo)((function(){var e;return(0,je.hY)(null===tn||void 0===tn||null===(e=tn.features)||void 0===e?void 0:e[R.d.LOCAL_TIMEZONE])}),[null===tn||void 0===tn?void 0:tn.features]),on=(0,a.useMemo)((function(){var e;return null===tn||void 0===tn||null===(e=tn.features)||void 0===e?void 0:e[R.d.OPERATION_HISTORY]}),[tn]),rn=(0,a.useMemo)((function(){return un?se.O$:{}}),[un]),ln=Y.ZP.pipelines.list(we(we({},Qe),{},{include_schedules:1}),{revalidateOnFocus:!1},{pauseFetch:on&&Xe&&Pe.uuid===Xe}),cn=ln.data,dn=ln.mutate,sn=(0,a.useMemo)((function(){return(null===Ke||void 0===Ke?void 0:Ke[O.$1.HISTORY_DAYS])||7}),[Ke]),an=Y.ZP.pipelines.list(we(we({},Qe),{},(e={},(0,r.Z)(e,O.$1.HISTORY_DAYS,(0,pe.HW)(sn)?Number(sn):sn),(0,r.Z)(e,"include_schedules",1),e)),{},{pauseFetch:!on||!Xe||Pe.uuid!==Xe}),pn=an.data,fn=an.mutate,vn=(0,a.useCallback)((function(e){return e}),[He]),hn=(0,a.useMemo)((function(){var e=vn((null===cn||void 0===cn?void 0:cn.pipelines)||[]);if(null!==Ke&&void 0!==Ke&&Ke[O.$1.TAG]){var n=Ke[O.$1.TAG];e=e.filter((function(e){var i=e.tags;return i.some((function(e){return n.includes(e)}))||0===i.length&&n.includes(O.$1.NO_TAGS)}))}return e}),[cn,vn,Ke]),mn=(0,a.useMemo)((function(){return vn((null===pn||void 0===pn?void 0:pn.pipelines)||[])}),[pn,vn]),gn=(0,a.useMemo)((function(){return(0,be.HK)(hn,(function(e){return e.uuid}))}),[hn]),bn=(0,a.useMemo)((function(){return(0,be.HK)(mn,(function(e){return e.uuid}))}),[mn]),xn=(0,a.useCallback)((function(e){var n,i,t,u;return null===e||void 0===e||null===(n=e[2])||void 0===n||null===(i=n.props)||void 0===i||null===(t=i.children)||void 0===t||null===(u=t.props)||void 0===u?void 0:u.children}),[]),Zn=(0,a.useMemo)((function(){return(null===De||void 0===De?void 0:De.length)>0?null===De||void 0===De?void 0:De.map((function(e){var n=xn(e);return null===gn||void 0===gn?void 0:gn[n]})):hn}),[xn,De,hn,gn]),jn=(0,a.useMemo)((function(){return(null===Le||void 0===Le?void 0:Le.length)>0?null===Le||void 0===Le?void 0:Le.map((function(e){var n=xn(e);return null===bn||void 0===bn?void 0:bn[n]})):mn}),[xn,Le,mn,bn]),Cn=(0,a.useMemo)((function(){return[1,2,3,4,5,6,8,9]}),[]),_n=null===Ke||void 0===Ke?void 0:Ke[se.lG.SORT_COL_IDX],In=null===Ke||void 0===Ke?void 0:Ke[se.lG.SORT_DIRECTION],wn=(0,a.useMemo)((function(){return _n?{columnIndex:+_n,sortDirection:In||se.sh.ASC}:void 0}),[_n,In]),Pn=null===Ke||void 0===Ke?void 0:Ke[O.$1.GROUP],kn=(0,p.Db)((function(e){var n=e.pipelineUUID,i=e.filesOnly,t=void 0!==i&&i;return Y.ZP.downloads.pipelines.useCreate(n)({download:{ignore_folder_structure:t}})}),{onSuccess:function(e){return(0,ve.wD)(e,{callback:function(){var n=e.data.download.token;(0,_e.K)(n)},onErrorCallback:function(e,n){return qe({errors:n,response:e})}})}}),yn=(0,u.Z)(kn,1)[0];(0,a.useEffect)((function(){var e,n,i,t={};if(_n&&Cn.includes(+_n))(0,Q.t8)(ee,_n),In&&(0,Q.t8)(ne,In);else{var o=(0,Q.U2)(ee,null),l=(0,Q.U2)(ne,se.sh.ASC);null!==o&&(t[se.lG.SORT_COL_IDX]=o,t[se.lG.SORT_DIRECTION]=l)}on&&(Xe?(0,Q.t8)(ie,Xe):t.tab=(0,Q.U2)(ie,null===ye||void 0===ye||null===(n=ye[0])||void 0===n?void 0:n.uuid));if(Pn)ue((0,r.Z)({},Pn,!0));else{var c,d=(0,Q.U2)(J,{});d&&Object.entries(d).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];!c&&t&&(c=i)})),c&&(t[O.$1.GROUP]=c)}if((0,xe.Qr)(Qe)){var s={},a=(0,Q.U2)(X,{});a&&Object.entries(a).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];"undefined"!==typeof t&&null!==t&&(oe.RG.includes(i)||Ee.includes(i)?s[i]=t:(s[i]=[],Object.entries(t).forEach((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1]&&s[i].push(t)}))))})),(0,xe.Qr)(s)||(t={},Object.entries(we(we({},t),s)||{}).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],o=n[1];"undefined"!==typeof o&&null!==o&&(t[i]=o)})))}else{var p={};Object.entries(Qe).forEach((function(e){var n=(0,u.Z)(e,2),i=n[0],t=n[1];p[i]={};var o,r=t;"undefined"!==typeof t&&null!==t&&(oe.RG.includes(i)||Ee.includes(i)?p[i]=r:(Array.isArray(r)||(r=[r]),r&&Array.isArray(r)&&(null===(o=r)||void 0===o||o.forEach((function(e){p[i][e]=!0})))))})),te((0,xe.hB)(p))}null!==(e=t)&&void 0!==e&&e[O.$1.SEARCH]&&Ye(null===(i=t)||void 0===i?void 0:i[O.$1.SEARCH]);(0,xe.Qr)(t)||(console.log("wtf",t,(0,xe.hB)(t)),(0,ge.u7)((0,xe.hB)(t),{pushHistory:!1}))}),[Pn,on,Qe,Xe,Cn,_n,In]),(0,a.useEffect)((function(){(0,ve.bB)(cn,qe)}),[cn]);var Tn=function(e){return(0,p.Db)(Y.ZP.pipelines.useCreate(),{onSuccess:function(n){return(0,ve.wD)(n,{callback:function(n){var i=n.pipeline.uuid;null===e||void 0===e||e(i)},onErrorCallback:function(e,n){return qe({errors:n,response:e})}})}})},En=Tn((function(e){return l.push("/pipelines/[pipeline]/edit","/pipelines/".concat(e,"/edit"))})),An=(0,u.Z)(En,2),Sn=An[0],On=An[1].isLoading,Mn=Tn((function(){null===dn||void 0===dn||dn(),null===fn||void 0===fn||fn()})),Dn=(0,u.Z)(Mn,2),Rn=Dn[0],Nn=Dn[1].isLoading,Ln=(0,p.Db)((function(e){return Y.ZP.pipelines.useUpdate(e.uuid)({pipeline:e})}),{onSuccess:function(e){return(0,ve.wD)(e,{callback:function(e){var n=e.pipeline.uuid;We((function(e){return we(we({},e),{},(0,r.Z)({},n,!1))})),dn(),null===fn||void 0===fn||fn(),null===qn||void 0===qn||qn(),Oe(null)},onErrorCallback:function(e,n){var i,t=null===e||void 0===e||null===(i=e.url_parameters)||void 0===i?void 0:i.pk;We((function(e){return we(we({},e),{},(0,r.Z)({},t,!1))})),qe({errors:n,response:e})}})}}),Un=(0,u.Z)(Ln,2),Gn=Un[0],Hn=Un[1].isLoading,Bn=(0,p.Db)((function(e){return Y.ZP.pipelines.useDelete(e)()}),{onSuccess:function(e){return(0,ve.wD)(e,{callback:function(){null===dn||void 0===dn||dn(),null===fn||void 0===fn||fn()},onErrorCallback:function(e,n){return qe({errors:n,response:e})}})}}),Yn=(0,u.Z)(Bn,2),$n=Yn[0],Vn=Yn[1].isLoading,Wn=(0,Ce.dd)((function(e){var n=e.pipeline,i=e.pipelineDescription,t=e.pipelineName;return(0,T.jsx)(E,{isLoading:Hn,minWidth:55*ce.iI,noEmptyValue:!!t,onClose:qn,onSave:function(e){var i=n||Se;if(i){var u=i.uuid,o={uuid:u};t?o.name=e:o.description=e,We((function(e){return we(we({},e),{},(0,r.Z)({},u,!0))})),Gn(o)}},textArea:!t,title:t?"Rename pipeline":"Edit description for ".concat(null===n||void 0===n?void 0:n.uuid),value:t||i})}),{},[Hn,Se],{background:!0,uuid:"rename_pipeline_and_save"}),zn=(0,u.Z)(Wn,2),Fn=zn[0],qn=zn[1],Kn=(0,Ce.dd)((function(){return(0,T.jsx)(F.BC,{children:(0,T.jsx)(h.Z,{contained:!0,onClickCustomTemplate:function(e){Sn({pipeline:{custom_template_uuid:null===e||void 0===e?void 0:e.template_uuid,name:(0,pe.Y6)()}}).then((function(){Jn()}))},showBreadcrumbs:!0,tabs:[re.A2]})})}),{},[Sn],{background:!0,uuid:"browse_templates"}),Qn=(0,u.Z)(Kn,2),Xn=Qn[0],Jn=Qn[1],ei=(0,Ce.dd)((function(e){var n=e.cancelButtonText,i=(e.header,e.onCancel),t=e.onSaveSuccess;return(0,T.jsx)(F.BC,{children:(0,T.jsx)(M.Z,{cancelButtonText:n,contained:!0,header:(0,T.jsx)(w.Z,{mb:ce.HN,children:(0,T.jsxs)(I.Z,{children:[(0,T.jsx)(P.ZP,{warning:!0,children:"You need to add an OpenAI API key to your project before you can generate pipelines using AI."}),(0,T.jsx)(w.Z,{mt:1,children:(0,T.jsxs)(P.ZP,{warning:!0,children:["Read ",(0,T.jsx)(A.Z,{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",openNewWindow:!0,children:"OpenAI\u2019s documentation"})," to get your API key."]})})]})}),onCancel:function(){null===i||void 0===i||i(),ti()},onSaveSuccess:function(e){nn(),ti(),null===t||void 0===t||t(e)}})})}),{},[nn],{background:!0,uuid:"configure_project"}),ni=(0,u.Z)(ei,2),ii=ni[0],ti=ni[1],ui=(0,Ce.dd)((function(){return(0,T.jsx)(F.BC,{children:(0,T.jsx)(v.Z,{createPipeline:Sn,isLoading:On,onClose:li})})}),{},[Sn,On],{background:!0,disableClickOutside:!0,disableCloseButton:!0,uuid:"AI_modal"}),oi=(0,u.Z)(ui,2),ri=oi[0],li=oi[1],ci=(0,a.useMemo)((function(){return(0,me.d)(Sn,{showAIModal:function(){null!==tn&&void 0!==tn&&tn.openai_api_key?ri():ii({onSaveSuccess:function(){ri()}})},showBrowseTemplates:Xn})}),[Sn,tn,ri,Xn,ii]),di=Y.ZP.tags.list().data,si=(0,a.useMemo)((function(){return(0,be.YC)((null===di||void 0===di?void 0:di.tags)||[],(function(e){return e.uuid}))}),[di]),ai=(0,a.useMemo)((function(){return(0,T.jsx)(B.Z,{addButtonProps:{isLoading:On,label:"New",menuItems:ci},deleteRowProps:{confirmationMessage:"This is irreversible and will immediately delete everything associated           with the pipeline, including its blocks, triggers, runs, logs, and history.",isLoading:Vn,item:"pipeline",onDelete:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===Se||void 0===Se?void 0:Se.uuid,"?"))&&$n(null===Se||void 0===Se?void 0:Se.uuid)}},extraActionButtonProps:{Icon:z.oX,confirmationDescription:"Cloning the selected pipeline will create a new pipeline with the same           configuration and code blocks. The blocks use the same block files as the original pipeline.           Pipeline triggers, runs, backfills, and logs are not copied over to the new pipeline.",confirmationMessage:"Do you want to clone the pipeline ".concat(null===Se||void 0===Se?void 0:Se.uuid,"?"),isLoading:Nn,onClick:function(){return Rn({pipeline:{clone_pipeline_uuid:null===Se||void 0===Se?void 0:Se.uuid}})},openConfirmationDialogue:!0,tooltip:"Clone pipeline"},filterOptions:{status:O.kA,tag:[O.$1.NO_TAGS].concat((0,o.Z)(si.map((function(e){return e.uuid})))),type:Object.values(O.qL)},filterValueLabelMapping:{status:O.kA.reduce((function(e,n){return we(we({},e),{},(0,r.Z)({},n,(0,pe.J3)((0,pe.kC)(n))))}),{}),tag:we((0,r.Z)({},O.$1.NO_TAGS,"No tags"),si.reduce((function(e,n){var i=n.uuid;return we(we({},e),{},(0,r.Z)({},i,i))}),{})),type:O.G7},groupButtonProps:{groupByLabel:Pn,menuItems:[{beforeIcon:Pn===O.r0.STATUS?(0,T.jsx)(z.Jr,{fill:$.Z.content.default,size:1.5*ce.iI}):(0,T.jsx)(z.Cd,{muted:!0,size:1.5*ce.iI}),label:function(){return(0,pe.kC)(O.r0.STATUS)},onClick:function(){var e=Pn===O.r0.STATUS?null:O.r0.STATUS;e||ue({}),(0,ge.u7)((0,r.Z)({},O.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Status"},{beforeIcon:Pn===O.r0.TAG?(0,T.jsx)(z.Jr,{fill:$.Z.content.default,size:1.5*ce.iI}):(0,T.jsx)(z.Cd,{muted:!0,size:1.5*ce.iI}),label:function(){return(0,pe.kC)(O.r0.TAG)},onClick:function(){var e=Pn===O.r0.TAG?null:O.r0.TAG;e||ue({}),(0,ge.u7)((0,r.Z)({},O.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Tag"},{beforeIcon:Pn===O.r0.TYPE?(0,T.jsx)(z.Jr,{fill:$.Z.content.default,size:1.5*ce.iI}):(0,T.jsx)(z.Cd,{muted:!0,size:1.5*ce.iI}),label:function(){return(0,pe.kC)(O.r0.TYPE)},onClick:function(){var e=Pn===O.r0.TYPE?null:O.r0.TYPE;e||ue({}),(0,ge.u7)((0,r.Z)({},O.$1.GROUP,e),{pushHistory:!0})},uuid:"Pipelines/GroupMenu/Type"}]},moreActionsMenuItems:[{label:function(){return"Rename pipeline"},onClick:function(){return Fn({pipelineName:null===Se||void 0===Se?void 0:Se.name})},uuid:"Pipelines/MoreActionsMenu/Rename"},{label:function(){return"Edit description"},onClick:function(){return Fn({pipeline:Se,pipelineDescription:null===Se||void 0===Se?void 0:Se.description})},uuid:"Pipelines/MoreActionsMenu/EditDescription"}],onClickFilterDefaults:function(){te({}),l.push("/pipelines")},onFilterApply:function(e,n){Object.values(n).every((function(e){return!(null!==e&&void 0!==e&&e.length)}))&&te({})},query:Qe,searchProps:{onChange:Ye,value:He},selectedRowId:null===Se||void 0===Se?void 0:Se.uuid,setSelectedRow:Oe})}),[Rn,$n,Pn,Nn,On,Vn,ci,Qe,l,He,Se,Fn,si]),pi=(0,F.VI)(null,{},[],{uuid:"pipelines/list"}),fi=(0,u.Z)(pi,1)[0],vi=(0,p.Db)(Y.ZP.projects.useUpdate(null===tn||void 0===tn?void 0:tn.name),{onSuccess:function(e){return(0,ve.wD)(e,{callback:function(){nn()},onErrorCallback:function(e,n){return fi({errors:n,response:e})}})}}),hi=(0,u.Z)(vi,2),mi=hi[0],gi=hi[1].isLoading,bi=(0,a.useCallback)((function(e){return mi({project:e})}),[mi]),xi=(0,Ce.dd)((function(){return(0,T.jsxs)(I.Z,{maxWidth:60*ce.iI,children:[(0,T.jsx)(w.Z,{mb:1,children:(0,T.jsx)(C.Z,{children:"Help improve Mage"})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsx)(P.ZP,{default:!0,children:"Please contribute usage statistics to help improve the developer experience for you and everyone in the community \ud83e\udd1d."})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsx)(I.Z,{success:!0,children:(0,T.jsxs)(j.ZP,{alignItems:"center",children:[(0,T.jsx)(z.Yo,{size:5*ce.iI,success:!0}),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsx)(Z.Z,{children:(0,T.jsx)(P.ZP,{children:"All usage statistics are completely anonymous. It\u2019s impossible for Mage to know which statistics belongs to whom."})})]})})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsxs)(P.ZP,{default:!0,children:["By opting into sending usage statistics to ",(0,T.jsx)(A.Z,{href:"https://www.mage.ai",openNewWindow:!0,children:"Mage"}),", it\u2019ll help the team and community of contributors (",(0,T.jsx)(A.Z,{href:"https://www.mage.ai/chat",openNewWindow:!0,children:"Magers"}),") learn what\u2019s going wrong with the tool and what improvements can be made."]})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsx)(P.ZP,{default:!0,children:"In addition to helping reduce potential errors, you\u2019ll help inform which features are useful and which need work."})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[(0,T.jsx)(P.ZP,{bold:!0,children:"I want to help make Mage more powerful for everyone"}),(0,T.jsx)(w.Z,{mr:ce.cd}),(0,T.jsx)(H.Z,{checked:!0,onCheck:function(){window.confirm("Are you sure you don\u2019t want to help everyone in the community?")&&bi({help_improve_mage:!1}).then((function(){return Ci()}))}})]})}),gi&&(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsx)(L.Z,{inverted:!0})}),(0,T.jsx)(w.Z,{mb:ce.cd,children:(0,T.jsxs)(P.ZP,{muted:!0,small:!0,children:["To learn more about how this works, please check out the ",(0,T.jsx)(A.Z,{href:"https://docs.mage.ai/contributing/statistics/overview",openNewWindow:!0,small:!0,children:"documentation"}),"."]})}),(0,T.jsx)(m.ZP,{onClick:function(){return bi({help_improve_mage:!0}).then((function(){return Ci()}))},secondary:!0,children:"Close"})]})}),{},[tn],{background:!0,hideCallback:function(){bi({help_improve_mage:!0})},uuid:"help_mage"}),Zi=(0,u.Z)(xi,2),ji=Zi[0],Ci=Zi[1];(0,a.useEffect)((function(){tn&&null===(null===tn||void 0===tn?void 0:tn.help_improve_mage)&&ji()}),[tn,ji]);var _i=(0,a.useCallback)((function(e){var n={};null===e||void 0===e||e.forEach((function(e,i){var t=null===e||void 0===e?void 0:e[Pn];if(O.r0.STATUS===Pn){var u=(e||{}).schedules,o=void 0===u?[]:u,r=o.length;t=o.find((function(e){var n=e.status;return de.fq.ACTIVE===n}))?O.QK.ACTIVE:r>=1?O.QK.INACTIVE:O.QK.NO_SCHEDULES}else if(O.r0.TAG===Pn){t=(null===e||void 0===e?void 0:e.tags)?(0,be.YC)(e.tags,(function(e){return e})).join(", "):""}n[t]||(n[t]=[]),n[t].push(i)}));var i=[],t=[];O.r0.STATUS===Pn?Object.values(O.QK).forEach((function(e){i.push(n[e]),t.push((0,pe.vg)(e))})):O.r0.TAG===Pn?(0,be.YC)(Object.keys(n),(function(e){return e})).forEach((function(e){i.push(n[e]),e?t.push(e.split(", ").map((function(e,n){return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)("div",{style:{marginLeft:n>=1?4:0}},"".concat(e,"-").concat(n,"-spacing")),(0,T.jsx)(b.Z,{small:!0,children:(0,T.jsx)(P.ZP,{children:e})},"".concat(e,"-").concat(n))]})}))):t.push("No tags")})):O.r0.TYPE===Pn&&Object.values(O.qL).forEach((function(e){i.push(n[e]),t.push(O.G7[e])}));var u=[],o=[];return null===i||void 0===i||i.forEach((function(e,n){"undefined"!==typeof e&&null!==e&&(null===e||void 0===e?void 0:e.length)>=1&&(o.push(e),u.push(null===t||void 0===t?void 0:t[n]))})),{rowGroupHeaders:u,rowsGroupedByIndex:o}}),[Pn]),Ii=(0,a.useMemo)((function(){return _i(Zn)}),[_i,Zn]),wi=Ii.rowGroupHeaders,Pi=Ii.rowsGroupedByIndex,ki=(0,a.useMemo)((function(){return _i(jn)}),[_i,jn]),yi=ki.rowGroupHeaders,Ti=ki.rowsGroupedByIndex,Ei=(0,a.useCallback)((function(e,n,i,t,u){return(0,T.jsx)(U.Z,{columnFlex:[null,null,null,2,null,null,null,1,null,null,null],columns:[{label:function(){return""},uuid:"action"},{uuid:(0,pe.kC)(O.r0.STATUS)},{uuid:"Name"},{uuid:"Description"},{uuid:(0,pe.kC)(O.r0.TYPE)},we(we({},rn),{},{uuid:"Updated at"}),we(we({},rn),{},{uuid:"Created at"}),{uuid:"Tags"},{uuid:"Blocks"},{uuid:"Triggers"},{center:!0,label:function(){return""},uuid:"Actions"}],defaultSortColumnIndex:2,getUniqueRowIdentifier:xn,isSelectedRow:function(e){var i;return(null===(i=n[e])||void 0===i?void 0:i.uuid)===(null===Se||void 0===Se?void 0:Se.uuid)},localStorageKeySortColIdx:ee,localStorageKeySortDirection:ne,onClickRow:function(e){return Oe((function(i){var t=n[e];return(null===i||void 0===i?void 0:i.uuid)!==(null===t||void 0===t?void 0:t.uuid)?t:null}))},onDoubleClickRow:function(e){l.push("/pipelines/[pipeline]/edit","/pipelines/".concat(n[e].uuid,"/edit"))},ref:d,renderRightClickMenuItems:function(e){var i=n[e];return[{label:function(){return"Edit description"},onClick:function(){return Fn({pipeline:i,pipelineDescription:null===i||void 0===i?void 0:i.description})},uuid:"edit_description"},{label:function(){return"Rename"},onClick:function(){return Fn({pipeline:i,pipelineName:null===i||void 0===i?void 0:i.name})},uuid:"rename"},{label:function(){return"Clone"},onClick:function(){return Rn({pipeline:{clone_pipeline_uuid:null===i||void 0===i?void 0:i.uuid}})},uuid:"clone"},{label:function(){return"Download (keep folder structure)"},onClick:function(){yn({pipelineUUID:null===i||void 0===i?void 0:i.uuid,filesOnly:!1})},uuid:"download_keep_folder_structure"},{label:function(){return"Download (without folder structure)"},onClick:function(){yn({pipelineUUID:null===i||void 0===i?void 0:i.uuid,filesOnly:!0})},uuid:"download_without_folder_structure"},{label:function(){return"Add/Remove tags"},onClick:function(){l.push("/pipelines/[pipeline]/settings","/pipelines/".concat(null===i||void 0===i?void 0:i.uuid,"/settings"))},uuid:"add_tags"},{label:function(){return"Create template"},onClick:function(){l.push("/templates?object_type=".concat(le.R,"&new=1&pipeline_uuid=").concat(null===i||void 0===i?void 0:i.uuid))},uuid:"create_custom_template"},{label:function(){return"Create global data product"},onClick:function(){l.push("/global-data-products?object_type=".concat(q.b.PIPELINE,"&new=1&object_uuid=").concat(null===i||void 0===i?void 0:i.uuid))},uuid:"create_global_data_product"},{label:function(){return"Delete"},onClick:function(){window.confirm("Are you sure you want to delete pipeline ".concat(null===i||void 0===i?void 0:i.uuid,"?"))&&$n(null===i||void 0===i?void 0:i.uuid)},uuid:"delete"}]},rightClickMenuHeight:252,rightClickMenuWidth:30*ce.iI,rowGroupHeaders:i,rows:null===e||void 0===e?void 0:e.map((function(e,n){var i=e.blocks,t=e.created_at,u=e.description,o=e.schedules,c=e.tags,d=e.type,a=e.updated_at,p=e.uuid,f=i.filter((function(e){var n=e.type;return W.tf.SCRATCHPAD!==n})).length,v=o.length,h=o.find((function(e){var n=e.status;return de.fq.ACTIVE===n})),g=(0,T.jsx)("div",{children:(0,T.jsx)(G.Z,{tags:null===c||void 0===c?void 0:c.map((function(e){return{uuid:e}}))})},"pipeline_tags_".concat(n));return[v>=1||Ve[p]?(0,T.jsx)(m.ZP,{iconOnly:!0,loading:!!Ve[p],noBackground:!0,noBorder:!0,noPadding:!0,onClick:function(n){(0,Ze.j)(n),We((function(e){return we(we({},e),{},(0,r.Z)({},p,!0))})),Gn(we(we({},e),{},{status:h?de.fq.INACTIVE:de.fq.ACTIVE}))},children:h?(0,T.jsx)(z.dz,{muted:!0,size:2*ce.iI}):(0,T.jsx)(z.Py,{default:!0,size:2*ce.iI})}):null,(0,T.jsx)(P.ZP,{default:!h,monospace:!0,success:!!h,children:h?de.fq.ACTIVE:v>=1?de.fq.INACTIVE:"no schedules"},"pipeline_status_".concat(n)),(0,T.jsx)(s(),{as:"/pipelines/".concat(p),href:"/pipelines/[pipeline]",passHref:!0,children:(0,T.jsx)(A.Z,{sameColorAsText:!0,children:p})},"pipeline_name_".concat(n)),(0,T.jsx)(P.ZP,{default:!0,preWrap:!0,title:u,children:u},"pipeline_description_".concat(n)),(0,T.jsx)(P.ZP,{children:O.G7[d]},"pipeline_type_".concat(n)),(0,T.jsx)(P.ZP,{monospace:!0,small:!0,title:a?(0,fe._6)(a):null,children:a?(0,fe.XG)(a,un):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_updated_at_".concat(n)),(0,T.jsx)(P.ZP,{monospace:!0,small:!0,title:t?(0,fe._6)(t):null,children:t?(0,fe.XG)(t.slice(0,19),un):(0,T.jsx)(T.Fragment,{children:"\u2014"})},"pipeline_created_at_".concat(n)),g,(0,T.jsx)(P.ZP,{default:0===f,monospace:!0,children:f},"pipeline_block_count_".concat(n)),(0,T.jsx)(P.ZP,{default:0===v,monospace:!0,children:v},"pipeline_trigger_count_".concat(n)),(0,T.jsxs)(Z.Z,{flex:1,justifyContent:"flex-end",children:[(0,T.jsx)(m.ZP,we(we({},Ae),{},{onClick:function(){yn({pipelineUUID:p})},title:"Download (keep folder structure)",children:(0,T.jsx)(z.vc,{default:!0,size:2*ce.iI})})),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsx)(m.ZP,we(we({},Ae),{},{onClick:function(){l.push("/pipelines/[pipeline]","/pipelines/".concat(p))},title:"Detail",children:(0,T.jsx)(z.UY,{default:!0,size:2*ce.iI})})),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsx)(m.ZP,we(we({},Ae),{},{onClick:function(){l.push("/pipelines/[pipeline]/logs","/pipelines/".concat(p,"/logs"))},title:"Logs",children:(0,T.jsx)(z.$B,{default:!0,size:2*ce.iI})}))]},"chevron_icon_".concat(n))]})),rowsGroupedByIndex:t,setRowsSorted:u,sortableColumnIndexes:Cn,sortedColumn:wn,stickyHeader:!0})}),[Rn,$n,yn,un,xn,Ve,l,Se,We,Oe,Fn,Cn,wn,rn,Gn]),Ai=(0,a.useMemo)((function(){return Ei(hn,Zn,wi,Pi,Re)}),[hn,Zn,Ei,wi,Pi,Re]),Si=(0,a.useMemo)((function(){return Ei(mn,jn,yi,Ti,Ue)}),[mn,jn,Ei,yi,Ti,Ue]),Oi=(0,a.useMemo)((function(){return(null===hn||void 0===hn?void 0:hn.length)||0}),[hn]),Mi=(0,a.useMemo)((function(){return(null===mn||void 0===mn?void 0:mn.length)||0}),[mn]),Di=(0,a.useMemo)((function(){return(!on||ke.uuid===Xe)&&!Oi||on&&Pe.uuid===Xe&&!Mi}),[on,Oi,Mi,Xe]),Ri=(0,a.useMemo)((function(){var e=null===Qe||void 0===Qe?void 0:Qe[oe.$D.LIMIT];return(0,T.jsxs)(j.ZP,{alignItems:"center",children:[(0,T.jsx)(P.ZP,{muted:!0,small:!0,children:"Per page"}),(0,T.jsx)(w.Z,{mr:1}),(0,T.jsxs)(N.Z,{compact:!0,onChange:function(e){return(0,ge.u7)((0,r.Z)({},oe.$D.LIMIT,e.target.value),{pushHistory:!0})},small:!0,value:e,children:[e&&(e>5*S.Q||e%S.Q)&&(0,T.jsx)("option",{value:e,children:e}),(0,be.w6)(5).map((function(e,n){var i=(n+1)*S.Q;return(0,T.jsx)("option",{value:i,children:i})}))]})]})}),[Qe]),Ni=(0,a.useMemo)((function(){var e,n,i=cn;on&&Pe.uuid===Xe&&(i=pn);var t=(null===(e=i)||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.count)||0,u=(null===Qe||void 0===Qe?void 0:Qe[oe.$D.LIMIT])||S.Q,o=(null===Qe||void 0===Qe?void 0:Qe[oe.$D.OFFSET])||0,l=Math.ceil(t/u);return(0,T.jsx)(w.Z,{p:ce.cd,children:(0,T.jsx)(S.ZP,{maxPages:S.Et,onUpdate:function(e){var n=Number(e);(0,ge.u7)((0,r.Z)({},oe.$D.OFFSET,n*u))},page:Math.floor(o/u),totalPages:l})})}),[cn,pn,on,Qe,Xe]);return(0,T.jsxs)(x.Z,{errors:Fe,setErrors:qe,subheaderChildren:(0,T.jsxs)(j.ZP,{alignItems:"center",justifyContent:"space-between",children:[ai,Ri]}),title:"Pipelines",uuid:"pipelines/index",children:[on&&(0,T.jsx)(w.Z,{px:ce.cd,ref:c,children:(0,T.jsx)(g.Z,{noPadding:!0,onClickTab:function(e){var n,i=e.uuid;return(0,ge.u7)((n={},(0,r.Z)(n,Te,i),(0,r.Z)(n,oe.$D.LIMIT,null),(0,r.Z)(n,oe.$D.OFFSET,null),n),{pushHistory:!0})},regularSizeText:!0,selectedTabUUID:Xe,tabs:ye.map((function(e){var n=e.Icon,i=e.label;return{Icon:n,label:function(){var e;return i({count:null===cn||void 0===cn||null===(e=cn.metadata)||void 0===e?void 0:e.count})},uuid:e.uuid}})),underlineStyle:!0})}),Di?(0,T.jsx)(w.Z,{p:ce.Mq,children:cn?(0,T.jsx)(P.ZP,{bold:!0,default:!0,monospace:!0,muted:!0,children:"No pipelines available"}):(0,T.jsx)(L.Z,{inverted:!0,large:!0})}):null,(0,T.jsxs)(ae.cl,{hide:Di,includePadding:!!Pn,maxHeight:"calc(100vh - ".concat(K.Mz+74+(D||0)+(null===_||void 0===_||null===(n=_.current)||void 0===n||null===(i=n.getBoundingClientRect)||void 0===i||null===(t=i.call(n))||void 0===t?void 0:t.height),"px)"),children:[(!on||ke.uuid===Xe)&&Ai,on&&Pe.uuid===Xe&&Si]}),(0,T.jsx)("div",{ref:_,children:Ni})]})}Se.getInitialProps=(0,t.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}}),e)})));var Oe=(0,D.Z)(Se)},44952:function(e,n,i){"use strict";i.d(n,{K:function(){return u}});var t=i(4383);function u(e){var n=(0,t.ZP)("downloads",e),i=document.createElement("a");i.href=n,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n),document.body.removeChild(i)}},79274:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines",function(){return i(55620)}])}},function(e){e.O(0,[2678,1154,844,5820,6639,1124,341,1751,1821,4267,6990,8487,8264,7858,5499,4366,4138,5810,1769,1550,90,9264,2474,1952,9774,2888,179],(function(){return n=79274,e(e.s=n);var n}));var n=e.O();_N_E=n}]);