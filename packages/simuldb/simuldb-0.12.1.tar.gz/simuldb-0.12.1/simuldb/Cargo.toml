[package]
authors = ["Daniel Hauck <mail@dhauck.eu>"]
description = "Database with backend and format agnostic data storage for simulation results coupled with metadata"
edition = "2021"
license = "MIT OR Apache-2.0"
repository = "https://gitlab.com/solidtux-rust/simuldb"
name = "simuldb"
version = "0.12.1"

[package.metadata.release]
shared-version = true
tag = true

[lib]
crate-type = ["lib", "cdylib"]

[features]
arbitrary = ["dep:arbitrary", "chrono/arbitrary", "uuid/arbitrary"]
default = ["json", "arbitrary", "neo4j", "sha"]
# JSON backend
json = ["serde_json"]
# Neo4j backend
neo4j = ["neo4rs", "tokio"]
# automatic hash geneation
sha = ["sha2"]
# Python binding
py = ["pyo3"]
# git commit hash in version
git = []

# Internal dependencies (not present in the outgoing API): full version
# Otherwise: major (or sometimes minor) version only
#
# neo4rs uses the "full" feature of tokio anyways, so no need to be specific here
[dependencies]
arbitrary = { version = "1.3.1", features = ["derive"], optional = true }
async-recursion = "1.0.5"
chrono = { version = "0.4", features = ["serde"] }
hex = "0.4.3"
hostname = "0.3.1"
log = "0.4"
neo4rs = { version = "0.6", optional = true }
paste = "1.0.14"
pyo3 = { version = "0.20.0", optional = true, features = ["extension-module", "abi3-py37"] }
serde = { version = "1", features = ["derive"] }
serde_json = { version = "1", optional = true, features = ["float_roundtrip"] }
sha2 = { version = "0.10.8", optional = true }
thiserror = "1.0.50"
tokio = { version = "1", optional = true, features = ["full"] }
uuid = { version = "1.5.0", features = ["serde", "v4"] }

[dev-dependencies]
arbtest = "0.2.0"
env_logger = "0.10.0"
hostname = "0.3.1"
test-log = "0.2.13"
trace = "0.1.7"
config = {version = "0.13.4", features=["yaml"]}
