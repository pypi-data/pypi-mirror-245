"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([[51282],{65189:function(e,t,n){var r,i,o,a=n(88962),s=n(33368),c=n(71650),u=n(82390),l=n(69205),d=n(70906),h=n(91808),f=(n(97393),n(68144)),v=n(95260),m=n(99312),p=n(40039),k=n(81043),g=n(34541),y=n(47838),b=(n(10187),n(32797),n(5239),n(17692),n(86439),n(47181)),w=(n(51358),n(46798),n(98490),n(31528),n(7695),n(44758),n(80354),n(68630),n(93217)),_=function(){var e=(0,k.Z)((0,m.Z)().mark((function e(t,i,o){return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r||(r=(0,w.Ud)(new Worker(new URL(n.p+n.u(71402),n.b)))),e.abrupt("return",r.renderMarkdown(t,i,o));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Z={Note:"info",Warning:"warning"};(0,h.Z)([(0,v.Mo)("ha-markdown-element")],(function(e,t){var n,r=function(t){(0,l.Z)(r,t);var n=(0,d.Z)(r);function r(){var t;(0,c.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,u.Z)(t)),t}return(0,s.Z)(r)}(t);return{F:r,d:[{kind:"field",decorators:[(0,v.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"allowSvg",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"breaks",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value:function(){return!1}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"update",value:function(e){(0,g.Z)((0,y.Z)(r.prototype),"update",this).call(this,e),void 0!==this.content&&this._render()}},{kind:"method",key:"_render",value:(n=(0,k.Z)((0,m.Z)().mark((function e(){var t,n,r,i,o,a,s,c,u,l,d;return(0,m.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(String(this.content),{breaks:this.breaks,gfm:!0},{allowSvg:this.allowSvg});case 2:for(this.innerHTML=e.sent,this._resize(),t=document.createTreeWalker(this,NodeFilter.SHOW_ELEMENT,null);t.nextNode();)if((n=t.currentNode)instanceof HTMLAnchorElement&&n.host!==document.location.host)n.target="_blank",n.rel="noreferrer noopener";else if(n instanceof HTMLImageElement)this.lazyImages&&(n.loading="lazy"),n.addEventListener("load",this._resize);else if(n instanceof HTMLQuoteElement&&(r=n.firstElementChild,i=null==r?void 0:r.firstElementChild,o=(null==i?void 0:i.textContent)&&Z[i.textContent],"STRONG"===(null==i?void 0:i.nodeName)&&o)){(s=document.createElement("ha-alert")).alertType=o,s.title="#text"===r.childNodes[1].nodeName&&(null===(a=r.childNodes[1].textContent)||void 0===a?void 0:a.trimStart())||"",c=Array.from(r.childNodes),u=(0,p.Z)(c.slice(c.findIndex((function(e){return e instanceof HTMLBRElement}))+1));try{for(u.s();!(l=u.n()).done;)d=l.value,s.appendChild(d)}catch(h){u.e(h)}finally{u.f()}n.firstElementChild.replaceWith(s)}case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{kind:"field",key:"_resize",value:function(){var e=this;return function(){return(0,b.B)(e,"content-resize")}}}]}}),f.fl),n(9381),n(81312),n(52039),(0,h.Z)([(0,v.Mo)("ha-markdown")],(function(e,t){var n=function(t){(0,l.Z)(r,t);var n=(0,d.Z)(r);function r(){var t;(0,c.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,u.Z)(t)),t}return(0,s.Z)(r)}(t);return{F:n,d:[{kind:"field",decorators:[(0,v.Cb)()],key:"content",value:void 0},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"allowSvg",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({type:Boolean})],key:"breaks",value:function(){return!1}},{kind:"field",decorators:[(0,v.Cb)({type:Boolean,attribute:"lazy-images"})],key:"lazyImages",value:function(){return!1}},{kind:"method",key:"render",value:function(){return this.content?(0,f.dy)(i||(i=(0,a.Z)(['<ha-markdown-element .content="','" .allowSvg="','" .breaks="','" .lazyImages="','"></ha-markdown-element>'])),this.content,this.allowSvg,this.breaks,this.lazyImages):f.Ld}},{kind:"get",static:!0,key:"styles",value:function(){return(0,f.iv)(o||(o=(0,a.Z)([":host{display:block}ha-markdown-element{-ms-user-select:text;-webkit-user-select:text;-moz-user-select:text}ha-markdown-element>:first-child{margin-top:0}ha-markdown-element>:last-child{margin-bottom:0}a{color:var(--primary-color)}img{max-width:100%}code,pre{background-color:var(--markdown-code-background-color,none);border-radius:3px}svg{background-color:var(--markdown-svg-background-color,none);color:var(--markdown-svg-color,none)}code{font-size:85%;padding:.2em .4em}pre code{padding:0}pre{padding:16px;overflow:auto;line-height:1.45;font-family:var(--code-font-family, monospace)}h1,h2,h3,h4,h5,h6{line-height:initial}h2{font-size:1.5em;font-weight:700}"])))}}]}}),f.oi)},17324:function(e,t,n){n.d(t,{N:function(){return r},Z:function(){return i}});n(85717);var r=function(e,t,n){return e.subscribeMessage((function(e){return t(e)}),Object.assign({type:"render_template"},n))},i=function(e,t,n,r,i){return e.connection.subscribeMessage(i,{type:"template/start_preview",flow_id:t,flow_type:n,user_input:r})}},51282:function(e,t,n){n.r(t),n.d(t,{HuiMarkdownCard:function(){return _}});var r,i,o,a=n(88962),s=n(99312),c=n(81043),u=n(33368),l=n(71650),d=n(82390),h=n(69205),f=n(70906),v=n(91808),m=n(34541),p=n(47838),k=(n(97393),n(51358),n(46798),n(47084),n(5239),n(98490),n(51467),n(22859),n(68144)),g=n(95260),y=n(83448),b=n(62877),w=(n(22098),n(65189),n(9381),n(17324)),_=(0,v.Z)([(0,g.Mo)("hui-markdown-card")],(function(e,t){var v,_,Z,E=function(t){(0,h.Z)(r,t);var n=(0,f.Z)(r);function r(){var t;(0,l.Z)(this,r);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n.call.apply(n,[this].concat(o)),e((0,d.Z)(t)),t}return(0,u.Z)(r)}(t);return{F:E,d:[{kind:"method",static:!0,key:"getConfigElement",value:(Z=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(68331),n.e(26156)]).then(n.bind(n,54102));case 2:return e.abrupt("return",document.createElement("hui-markdown-card-editor"));case 3:case"end":return e.stop()}}),e)}))),function(){return Z.apply(this,arguments)})},{kind:"method",static:!0,key:"getStubConfig",value:function(){return{type:"markdown",content:"The **Markdown** card allows you to write any text. You can style it **bold**, *italicized*, ~strikethrough~ etc. You can do images, links, and more.\n\nFor more information see the [Markdown Cheatsheet](https://commonmark.org/help)."}}},{kind:"field",decorators:[(0,g.Cb)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,g.Cb)({type:Boolean})],key:"editMode",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_config",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_error",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_errorLevel",value:void 0},{kind:"field",decorators:[(0,g.SB)()],key:"_templateResult",value:void 0},{kind:"field",key:"_unsubRenderTemplate",value:void 0},{kind:"method",key:"getCardSize",value:function(){return void 0===this._config?3:void 0===this._config.card_size?Math.round(this._config.content.split("\n").length/2)+(this._config.title?1:0):this._config.card_size}},{kind:"method",key:"setConfig",value:function(e){var t;if(!e.content)throw new Error("Content required");(null===(t=this._config)||void 0===t?void 0:t.content)!==e.content&&this._tryDisconnect(),this._config=e}},{kind:"method",key:"connectedCallback",value:function(){(0,m.Z)((0,p.Z)(E.prototype),"connectedCallback",this).call(this),this._tryConnect()}},{kind:"method",key:"disconnectedCallback",value:function(){(0,m.Z)((0,p.Z)(E.prototype),"disconnectedCallback",this).call(this),this._tryDisconnect()}},{kind:"method",key:"render",value:function(){var e,t;return this._config?(0,k.dy)(r||(r=(0,a.Z)([" ",' <ha-card .header="','"> <ha-markdown breaks class="','" .content="','"></ha-markdown> </ha-card> '])),this._error?(0,k.dy)(i||(i=(0,a.Z)(['<ha-alert alert-type="','">',"</ha-alert>"])),(null===(e=this._errorLevel)||void 0===e?void 0:e.toLowerCase())||"error",this._error):k.Ld,this._config.title,(0,y.$)({"no-header":!this._config.title}),null===(t=this._templateResult)||void 0===t?void 0:t.result):k.Ld}},{kind:"method",key:"updated",value:function(e){if((0,m.Z)((0,p.Z)(E.prototype),"updated",this).call(this,e),this._config&&this.hass){e.has("_config")&&this._tryConnect();var t=e.get("hass"),n=e.get("_config");t&&n&&t.themes===this.hass.themes&&n.theme===this._config.theme||(0,b.R)(this,this.hass.themes,this._config.theme)}}},{kind:"method",key:"_tryConnect",value:(_=(0,c.Z)((0,s.Z)().mark((function e(){var t=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this._unsubRenderTemplate&&this.hass&&this._config){e.next=2;break}return e.abrupt("return");case 2:return this._error=void 0,this._errorLevel=void 0,e.prev=4,this._unsubRenderTemplate=(0,w.N)(this.hass.connection,(function(e){"error"in e?"ERROR"!==e.level&&"ERROR"===t._errorLevel||(t._error=e.error,t._errorLevel=e.level):t._templateResult=e}),{template:this._config.content,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0,report_errors:this.editMode}),e.next=8,this._unsubRenderTemplate;case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(4),this.editMode&&(this._error=e.t0.message,this._errorLevel=void 0),this._templateResult={result:this._config.content,listeners:{all:!1,domains:[],entities:[],time:!1}},this._unsubRenderTemplate=void 0;case 15:case"end":return e.stop()}}),e,this,[[4,10]])}))),function(){return _.apply(this,arguments)})},{kind:"method",key:"_tryDisconnect",value:(v=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._unsubRenderTemplate){e.next=2;break}return e.abrupt("return");case 2:this._unsubRenderTemplate.then((function(e){return e()})).catch((function(){})),this._unsubRenderTemplate=void 0,this._error=void 0,this._errorLevel=void 0;case 6:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{kind:"get",static:!0,key:"styles",value:function(){return(0,k.iv)(o||(o=(0,a.Z)(["ha-card{height:100%}ha-alert{margin-bottom:8px}ha-markdown{padding:0 16px 16px;word-wrap:break-word}ha-markdown.no-header{padding-top:16px}"])))}}]}}),k.oi)},79894:function(e,t,n){n(68077)({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})},93217:function(e,t,n){n.d(t,{Ud:function(){return g}});var r=n(68990),i=n(93359),o=n(59202),a=n(53709),s=n(40039),c=n(76775),u=(n(58556),n(94738),n(98214),n(46798),n(51467),n(22859),n(85717),n(51358),n(96043),n(5239),n(98490),n(10999),n(52117),n(63789),n(82479),n(94570),n(99397),n(89802),n(46349),n(70320),n(34997),n(9849),n(12148),n(17692),n(47084),n(39685),n(97393),n(91989),n(86576),n(79894),n(76843),Symbol("Comlink.proxy")),l=Symbol("Comlink.endpoint"),d=Symbol("Comlink.releaseProxy"),h=Symbol("Comlink.finalizer"),f=Symbol("Comlink.thrown"),v=function(e){return"object"===(0,c.Z)(e)&&null!==e||"function"==typeof e},m=new Map([["proxy",{canHandle:function(e){return v(e)&&e[u]},serialize:function(e){var t=new MessageChannel,n=t.port1,r=t.port2;return p(e,n),[r,[r]]},deserialize:function(e){return e.start(),g(e)}}],["throw",{canHandle:function(e){return v(e)&&f in e},serialize:function(e){var t=e.value;return[t instanceof Error?{isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:{isError:!1,value:t},[]]},deserialize:function(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}}]]);function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["*"];t.addEventListener("message",(function c(l){if(l&&l.data)if(function(e,t){var n,r=(0,s.Z)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t===i||"*"===i)return!0;if(i instanceof RegExp&&i.test(t))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(n,l.origin)){var d,v=Object.assign({path:[]},l.data),m=v.id,g=v.type,y=v.path,b=(l.data.argumentList||[]).map(x);try{var w=y.slice(0,-1).reduce((function(e,t){return e[t]}),e),_=y.reduce((function(e,t){return e[t]}),e);switch(g){case"GET":d=_;break;case"SET":w[y.slice(-1)[0]]=x(l.data.value),d=!0;break;case"APPLY":d=_.apply(w,b);break;case"CONSTRUCT":var Z;d=function(e){return Object.assign(e,(0,i.Z)({},u,!0))}((0,o.Z)(_,(0,a.Z)(b)));break;case"ENDPOINT":var E=new MessageChannel,S=E.port1,L=E.port2;p(e,L),d=function(e,t){return C.set(e,t),e}(S,[S]);break;case"RELEASE":d=void 0;break;default:return}}catch(Z){d=(0,i.Z)({value:Z},f,0)}Promise.resolve(d).catch((function(e){return(0,i.Z)({value:e},f,0)})).then((function(n){var i=R(n),o=(0,r.Z)(i,2),a=o[0],s=o[1];t.postMessage(Object.assign(Object.assign({},a),{id:m}),s),"RELEASE"===g&&(t.removeEventListener("message",c),k(t),h in e&&"function"==typeof e[h]&&e[h]())})).catch((function(e){var n=R((0,i.Z)({value:new TypeError("Unserializable return value")},f,0)),o=(0,r.Z)(n,2),a=o[0],s=o[1];t.postMessage(Object.assign(Object.assign({},a),{id:m}),s)}))}else console.warn("Invalid origin '".concat(l.origin,"' for comlink proxy"))})),t.start&&t.start()}function k(e){(function(e){return"MessagePort"===e.constructor.name})(e)&&e.close()}function g(e,t){return Z(e,[],t)}function y(e){if(e)throw new Error("Proxy has been released and is not useable")}function b(e){return S(e,{type:"RELEASE"}).then((function(){k(e)}))}var w=new WeakMap,_="FinalizationRegistry"in globalThis&&new FinalizationRegistry((function(e){var t=(w.get(e)||0)-1;w.set(e,t),0===t&&b(e)}));function Z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,i=new Proxy(arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},{get:function(r,o){if(y(n),o===d)return function(){!function(e){_&&_.unregister(e)}(i),b(e),n=!0};if("then"===o){if(0===t.length)return{then:function(){return i}};var s=S(e,{type:"GET",path:t.map((function(e){return e.toString()}))}).then(x);return s.then.bind(s)}return Z(e,[].concat((0,a.Z)(t),[o]))},set:function(i,o,s){y(n);var c=R(s),u=(0,r.Z)(c,2),l=u[0],d=u[1];return S(e,{type:"SET",path:[].concat((0,a.Z)(t),[o]).map((function(e){return e.toString()})),value:l},d).then(x)},apply:function(i,o,a){y(n);var s=t[t.length-1];if(s===l)return S(e,{type:"ENDPOINT"}).then(x);if("bind"===s)return Z(e,t.slice(0,-1));var c=E(a),u=(0,r.Z)(c,2),d=u[0],h=u[1];return S(e,{type:"APPLY",path:t.map((function(e){return e.toString()})),argumentList:d},h).then(x)},construct:function(i,o){y(n);var a=E(o),s=(0,r.Z)(a,2),c=s[0],u=s[1];return S(e,{type:"CONSTRUCT",path:t.map((function(e){return e.toString()})),argumentList:c},u).then(x)}});return function(e,t){var n=(w.get(t)||0)+1;w.set(t,n),_&&_.register(e,t,e)}(i,e),i}function E(e){var t,n=e.map(R);return[n.map((function(e){return e[0]})),(t=n.map((function(e){return e[1]})),Array.prototype.concat.apply([],t))]}var C=new WeakMap;function R(e){var t,n=(0,s.Z)(m);try{for(n.s();!(t=n.n()).done;){var i=(0,r.Z)(t.value,2),o=i[0],a=i[1];if(a.canHandle(e)){var c=a.serialize(e),u=(0,r.Z)(c,2);return[{type:"HANDLER",name:o,value:u[0]},u[1]]}}}catch(l){n.e(l)}finally{n.f()}return[{type:"RAW",value:e},C.get(e)||[]]}function x(e){switch(e.type){case"HANDLER":return m.get(e.name).deserialize(e.value);case"RAW":return e.value}}function S(e,t,n){return new Promise((function(r){var i=new Array(4).fill(0).map((function(){return Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)})).join("-");e.addEventListener("message",(function t(n){n.data&&n.data.id&&n.data.id===i&&(e.removeEventListener("message",t),r(n.data))})),e.start&&e.start(),e.postMessage(Object.assign({id:i},t),n)}))}}}]);
//# sourceMappingURL=51282.Vx_W6B3Zl7Y.js.map